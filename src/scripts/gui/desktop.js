const a9_0x2faf26=a9_0x23d6;(function(_0x2ec707,_0x48ed05){const _0x4fe826=a9_0x23d6,_0x55aa5d=_0x2ec707();while(!![]){try{const _0x3ae0ca=-parseInt(_0x4fe826(0x16b))/0x1*(parseInt(_0x4fe826(0x177))/0x2)+parseInt(_0x4fe826(0x193))/0x3*(-parseInt(_0x4fe826(0x162))/0x4)+-parseInt(_0x4fe826(0x14f))/0x5+-parseInt(_0x4fe826(0x146))/0x6+parseInt(_0x4fe826(0x185))/0x7*(parseInt(_0x4fe826(0x156))/0x8)+-parseInt(_0x4fe826(0x14e))/0x9+-parseInt(_0x4fe826(0x152))/0xa*(-parseInt(_0x4fe826(0x166))/0xb);if(_0x3ae0ca===_0x48ed05)break;else _0x55aa5d['push'](_0x55aa5d['shift']());}catch(_0x472cd0){_0x55aa5d['push'](_0x55aa5d['shift']());}}}(a9_0x5ba2,0x45be0));function a9_0x23d6(_0x35f3a7,_0x230a74){const _0x5ba2a4=a9_0x5ba2();return a9_0x23d6=function(_0x23d60e,_0x47b8a3){_0x23d60e=_0x23d60e-0x129;let _0x42be7b=_0x5ba2a4[_0x23d60e];if(a9_0x23d6['tcNGni']===undefined){var _0x2a3976=function(_0x3519d2){const _0x2ac35f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5b876f='',_0x216340='';for(let _0x1a6f08=0x0,_0x2cf455,_0x54ee9c,_0x486327=0x0;_0x54ee9c=_0x3519d2['charAt'](_0x486327++);~_0x54ee9c&&(_0x2cf455=_0x1a6f08%0x4?_0x2cf455*0x40+_0x54ee9c:_0x54ee9c,_0x1a6f08++%0x4)?_0x5b876f+=String['fromCharCode'](0xff&_0x2cf455>>(-0x2*_0x1a6f08&0x6)):0x0){_0x54ee9c=_0x2ac35f['indexOf'](_0x54ee9c);}for(let _0x748634=0x0,_0xbcb7d9=_0x5b876f['length'];_0x748634<_0xbcb7d9;_0x748634++){_0x216340+='%'+('00'+_0x5b876f['charCodeAt'](_0x748634)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x216340);};a9_0x23d6['AHqpoh']=_0x2a3976,_0x35f3a7=arguments,a9_0x23d6['tcNGni']=!![];}const _0x1f1e57=_0x5ba2a4[0x0],_0x4c3cce=_0x23d60e+_0x1f1e57,_0x14ccb5=_0x35f3a7[_0x4c3cce];return!_0x14ccb5?(_0x42be7b=a9_0x23d6['AHqpoh'](_0x42be7b),_0x35f3a7[_0x4c3cce]=_0x42be7b):_0x42be7b=_0x14ccb5,_0x42be7b;},a9_0x23d6(_0x35f3a7,_0x230a74);}function a9_0x5ba2(){const _0x5843d5=['y2XPzw50wq','nZC1otGWrMv5ywjR','z2v0qM91BMrPBMDdBgLLBNrszwn0','zgf0ys1WCM9NCMfTlw5HBwu','lMrLC2T0B3aTAwnVBLTKyxrHlxbYB2DYyw0TBMfTzt0I','C2vSzwn0zwrjy29UCW','ywrKrxzLBNrmAxn0zw5LCG','B3zLCMXHEq','AxneCMfNz2LUzW','mJC1mZKZn3jyuvnPzG','mtKZmZm0nwXlwxPjBW','ChvIBgLZAa','y3jLyxrLu2vSzwn0Aw9Ut3zLCMXHEq','mZbovLnNB3G','v0Lore9xx0zpq1vtruq','DxjS','CMvTB3zL','mte1mZG0txDZEM50','C2vSzwn0zwq','D2fSBhbHCgvYtw9IAwXL','BgvMDa','CMvWBgfJzq','CMvZzxreCMfNu2vSzwn0Aw9Uu3rHDgu','C2v0Dxbjy29UrxzLBNrZ','BMfTzq','y2XLyxjtzwXLy3rPB24','v0Lore9xx0nsrufuruq','yxnZAwDU','DgHLBG','mtm2mtqXmKrOsMDgAW','BgfZDenSAwnRvgLTzxm','DxjSkcC','C2vSzwn0Aw9UqM94','nti5ndC3m1HcAvnerG','Cg9PBNrLCKLK','Dg9Nz2XLswnVBLnLBgvJDgLVBG','CxvLCNLtzwXLy3rVCG','DxbKyxrLu29JAwfSrgvZA3rVCeLJB25Z','mJC1meXTz2Xiwq','ywX0','iL0GAw1N','C3rVCfbYB3bHz2f0Aw9U','C2vSzwn0swnVBG','C3r5Bgu','C3jJ','yM90Dg9T','mhb4','y2XPzw50wa','D2fSBhbHCgvYrgvZA3rVCa','Dgv4DenVBNrLBNq','mtaYAhz1z0XW','C3vIC2nYAwjL','zM9YrwfJAa','CxvLCNLtzwXLy3rVCKfSBa','Cg9PBNrLCMrVD24','DgfYz2v0','AgLNAgXPz2H0swnVBNnjBNrLCNnLy3rPBMC','BM93','lMrLC2T0B3a','D2fSBhbHCgvYlw1VyMLSzq','zgvZA3rVCa','C2vSzwn0Aw9UlwjVEa','C2v0DxbezxnRDg9WrxzLBNrZ','C3bHBG','nZbmreXYt2i','y2XLyxi','A2v5','y2XHC3nmAxn0','i3nLBgvJDgLVBI1IB3GSic5ZzwXLy3rPB24TyM94','yMfJA2DYB3vUzeLTywDL','D2fSBhbHCgvYlwrLzMf1Bhq','ywn0AxzLrhjHz1bVAw50zxjjza','C2v0DxbqB2LUDgvYu2vSzwn0Aw9UrxzLBNrZ','y2XLyw51CefYDgLMywn0CW','AgfZrhjHz2DLza','y3jLyxrLrwXLBwvUDa','lMrLC2T0B3aTAwnVBG','ANnVBG','m2Ppzfbeza','y2XHC3noyw1L','CMLNAhq','DgfNtMfTzq','Ag92zxiTyNKTC2vSzwn0Aw9U','Dg9W','zgL2','C29JAwfSCW','Cg9PBNrLCM1VDMu','CgfYzw50tM9Kzq','C3rHCNry','z2v0swnVBNm','ChjLCgvUza','ufjpr1jbtv9puevo','ywrK','lI9ZExn0zw0UANnVBG','y2XLyxjuzw1WB3jHCNLiAwDOBgLNAhrZ','zxzLBNrcDxm','y3rYBeTLEq','C3rHCNrz','u1rbuLrnru5vx09qru5fra','y2XPy2S','Dg91y2HLBMq','BwLU','B3bLBG','DhjPBq','AxnbCNjHEq','y29UDgfPBNm','AwnVBG','CMvTB3zLq2HPBgq'];a9_0x5ba2=function(){return _0x5843d5;};return a9_0x5ba2();}import{EVENTS}from'../utils/eventBus.js';import{isMobileDevice}from'../utils/device.js';let SOCIALS_CACHE=null;async function getSocials(){const _0x2622f=a9_0x23d6;if(SOCIALS_CACHE)return SOCIALS_CACHE;try{const _0x3519d2=await fetch('./info.json'),_0x2ac35f=await _0x3519d2[_0x2622f(0x192)]();return SOCIALS_CACHE=Array[_0x2622f(0x141)](_0x2ac35f[_0x2622f(0x12e)])?_0x2ac35f['socials']:[],SOCIALS_CACHE;}catch(_0x5b876f){return SOCIALS_CACHE=[],SOCIALS_CACHE;}}let SYSTEM_ASSETS=null;async function getSystemAssets(){const _0x387461=a9_0x23d6;if(SYSTEM_ASSETS)return SYSTEM_ASSETS;try{const _0x216340=await fetch(_0x387461(0x136));return SYSTEM_ASSETS=await _0x216340[_0x387461(0x192)](),SYSTEM_ASSETS;}catch(_0x1a6f08){return SYSTEM_ASSETS={},SYSTEM_ASSETS;}}export default class Desktop{constructor(_0x2cf455){const _0xda5410=a9_0x23d6;this['eventBus']=_0x2cf455,this['desktop']=document[_0xda5410(0x169)](_0xda5410(0x17f)),this[_0xda5410(0x165)]=null,this[_0xda5410(0x14d)]=![],this[_0xda5410(0x18f)]=![],this[_0xda5410(0x131)]=0x0,this[_0xda5410(0x13a)]=0x0,this[_0xda5410(0x163)]={},this[_0xda5410(0x14a)]=new Set(),this[_0xda5410(0x18c)]=null,this[_0xda5410(0x18e)](),this[_0xda5410(0x151)](),getSocials()[_0xda5410(0x161)](_0x54ee9c=>{const _0x376127=_0xda5410;this[_0x376127(0x12e)]=_0x54ee9c,this[_0x376127(0x16a)](),this[_0x376127(0x15c)]();}),this['setupDesktopEvents'](),this[_0xda5410(0x18d)](),this[_0xda5410(0x181)][_0xda5410(0x188)][_0xda5410(0x155)](_0xda5410(0x18b),_0xda5410(0x180)),isMobileDevice()?this[_0xda5410(0x181)][_0xda5410(0x188)][_0xda5410(0x135)](_0xda5410(0x180)):this['desktop'][_0xda5410(0x188)][_0xda5410(0x135)](_0xda5410(0x18b)),this['eventBus'][_0xda5410(0x178)](EVENTS[_0xda5410(0x15f)],()=>this[_0xda5410(0x15e)]()),this[_0xda5410(0x138)][_0xda5410(0x178)](EVENTS[_0xda5410(0x153)],()=>this[_0xda5410(0x15e)]()),this[_0xda5410(0x138)][_0xda5410(0x178)](EVENTS[_0xda5410(0x134)],()=>this[_0xda5410(0x15b)]()),this[_0xda5410(0x138)][_0xda5410(0x178)](EVENTS[_0xda5410(0x13b)],()=>this['resetDragSelectionState']()),getSystemAssets()[_0xda5410(0x161)](_0x486327=>{const _0x28442f=_0xda5410;if(isMobileDevice()&&_0x486327[_0x28442f(0x158)])this['desktop'][_0x28442f(0x170)][_0x28442f(0x18a)]=_0x28442f(0x164)+_0x486327[_0x28442f(0x158)]+'\x27)';else _0x486327[_0x28442f(0x175)]&&(this['desktop']['style'][_0x28442f(0x18a)]=_0x28442f(0x164)+_0x486327['wallpaperDesktop']+'\x27)');});}[a9_0x2faf26(0x132)](){const _0x5920e0=a9_0x2faf26;return this['desktop'][_0x5920e0(0x17a)](_0x5920e0(0x191));}['cleanupArtifacts'](){const _0x571531=a9_0x2faf26;document['querySelectorAll'](_0x571531(0x189))[_0x571531(0x179)](_0x748634=>_0x748634[_0x571531(0x155)]());}[a9_0x2faf26(0x151)](){const _0x1b6d35=a9_0x2faf26;!this[_0x1b6d35(0x14c)]&&(this[_0x1b6d35(0x14c)]=document[_0x1b6d35(0x190)]('div'),this[_0x1b6d35(0x14c)][_0x1b6d35(0x194)]='selection-overlay',this['desktop'][_0x1b6d35(0x133)](this[_0x1b6d35(0x14c)]));}[a9_0x2faf26(0x16a)](){const _0x5235e5=a9_0x2faf26;if(!this[_0x5235e5(0x12e)])return;this[_0x5235e5(0x12e)][_0x5235e5(0x179)](_0xbcb7d9=>{const _0x3d0a9f=_0x5235e5,_0x2c2dd3=this['desktop'][_0x3d0a9f(0x169)](_0x3d0a9f(0x149)+_0xbcb7d9['key']+_0x3d0a9f(0x16d));if(_0x2c2dd3&&_0xbcb7d9['icon']){const _0xa1ebbb='./'+_0xbcb7d9[_0x3d0a9f(0x143)][_0x3d0a9f(0x15a)](/^\.\//,'')[_0x3d0a9f(0x15a)](/^\//,'');_0x2c2dd3[_0x3d0a9f(0x171)]=_0xa1ebbb,_0x2c2dd3[_0x3d0a9f(0x16c)]=_0xbcb7d9[_0x3d0a9f(0x15d)];}});}['setupIconEvents'](){const _0x4e9819=a9_0x2faf26,_0x36b15a='ontouchstart'in window,_0x2c69f6=isMobileDevice(),_0x5661da=_0x36b15a&&_0x2c69f6,_0x2433da=(this[_0x4e9819(0x12e)]||[])['reduce']((_0x422c3f,_0x951516)=>{const _0x3a20cb=_0x4e9819;return _0x422c3f[_0x951516[_0x3a20cb(0x187)]]=_0x951516,_0x422c3f;},{});this[_0x4e9819(0x132)]()['forEach'](_0x2e55ed=>{const _0x203fb4=_0x4e9819;if(_0x2e55ed[_0x203fb4(0x12a)]==='A')return;const _0x379dcd=_0x2e55ed[_0x203fb4(0x169)](_0x203fb4(0x184)),_0x2b0793=_0x379dcd?_0x379dcd[_0x203fb4(0x176)][_0x203fb4(0x140)]()['toLowerCase']()[_0x203fb4(0x15a)](/\s+/g,'-'):'';let _0x51bad3=![];const _0x509f83=_0x86ef34=>{const _0x45301a=_0x203fb4;_0x86ef34[_0x45301a(0x16e)]();if(_0x86ef34['type']===_0x45301a(0x13d))_0x51bad3=!![],setTimeout(()=>{_0x51bad3=![];},0x64);else{if(_0x86ef34['type']===_0x45301a(0x13c)&&_0x51bad3)return;}const _0x44c5da=Date[_0x45301a(0x17e)](),_0x213f51=0x190,_0x3d4f8c=this[_0x45301a(0x163)][_0x2b0793]||0x0;if(_0x44c5da-_0x3d4f8c<_0x213f51){if(!_0x2e55ed[_0x45301a(0x188)][_0x45301a(0x142)](_0x45301a(0x157)))this[_0x45301a(0x16f)](_0x2e55ed,!![]);let _0x234017=_0x2e55ed['getAttribute'](_0x45301a(0x148));_0x2433da[_0x234017]?window[_0x45301a(0x13f)](_0x2433da[_0x234017][_0x45301a(0x154)],'_blank'):this['eventBus'][_0x45301a(0x150)](EVENTS['PROGRAM_OPEN'],{'programName':_0x234017}),this[_0x45301a(0x163)][_0x2b0793]=0x0;}else this[_0x45301a(0x168)](_0x2e55ed,_0x86ef34[_0x45301a(0x139)]),this[_0x45301a(0x163)][_0x2b0793]=_0x44c5da;};_0x5661da?(_0x2e55ed[_0x203fb4(0x14b)]('touchend',_0x509f83),_0x2e55ed['addEventListener']('click',_0x509f83)):_0x2e55ed[_0x203fb4(0x14b)](_0x203fb4(0x13c),_0x509f83);});}[a9_0x2faf26(0x183)](){const _0x2cbac1=a9_0x2faf26;this[_0x2cbac1(0x181)][_0x2cbac1(0x14b)](_0x2cbac1(0x13c),_0x2db7f8=>{const _0x4e9009=_0x2cbac1;(_0x2db7f8[_0x4e9009(0x17c)]===this[_0x4e9009(0x181)]||_0x2db7f8[_0x4e9009(0x17c)]===this['overlay'])&&(!this[_0x4e9009(0x14d)]&&!this[_0x4e9009(0x18f)]&&this[_0x4e9009(0x15e)]());});}['setupPointerSelectionEvents'](){const _0xf38ad9=a9_0x2faf26;window[_0xf38ad9(0x14b)](_0xf38ad9(0x17b),_0x5c8585=>{const _0x29cee8=_0xf38ad9;if(_0x5c8585[_0x29cee8(0x17c)]!==this[_0x29cee8(0x14c)]&&_0x5c8585['target']!==this[_0x29cee8(0x181)])return;if(isMobileDevice()){if(this[_0x29cee8(0x18c)]!==null&&this[_0x29cee8(0x18c)]!==_0x5c8585[_0x29cee8(0x167)])this[_0x29cee8(0x15b)]();else this[_0x29cee8(0x14d)]&&this[_0x29cee8(0x18c)]===_0x5c8585[_0x29cee8(0x167)]&&this[_0x29cee8(0x15b)]();}if(this['isDragging'])return;if(!_0x5c8585['ctrlKey'])this['clearSelection']();const _0x342103=this[_0x29cee8(0x181)][_0x29cee8(0x147)]();this[_0x29cee8(0x131)]=_0x5c8585[_0x29cee8(0x174)]-_0x342103['left'],this[_0x29cee8(0x13a)]=_0x5c8585[_0x29cee8(0x145)]-_0x342103['top'],this[_0x29cee8(0x137)](),this[_0x29cee8(0x165)]=document[_0x29cee8(0x190)](_0x29cee8(0x12d)),this[_0x29cee8(0x165)][_0x29cee8(0x194)]=_0x29cee8(0x182),Object['assign'](this[_0x29cee8(0x165)][_0x29cee8(0x170)],{'left':this[_0x29cee8(0x131)]+'px','top':this[_0x29cee8(0x13a)]+'px','width':_0x29cee8(0x173),'height':_0x29cee8(0x173)}),this[_0x29cee8(0x181)]['appendChild'](this[_0x29cee8(0x165)]),this['isDragging']=!![],this[_0x29cee8(0x18f)]=![],this['activeDragPointerId']=_0x5c8585[_0x29cee8(0x167)];}),window['addEventListener'](_0xf38ad9(0x12f),_0x19e75c=>{const _0x44cb61=_0xf38ad9;if(!this[_0x44cb61(0x14d)]||!this[_0x44cb61(0x165)])return;if(isMobileDevice()&&_0x19e75c[_0x44cb61(0x167)]!==this['activeDragPointerId'])return;this[_0x44cb61(0x18f)]=!![];const _0x51f1b7=this['desktop'][_0x44cb61(0x147)](),_0x235d8b=_0x19e75c[_0x44cb61(0x174)]-_0x51f1b7['left'],_0x39e99c=_0x19e75c[_0x44cb61(0x145)]-_0x51f1b7['top'],_0x3c269f=Math[_0x44cb61(0x13e)](_0x235d8b,this['startX']),_0xba5469=Math['min'](_0x39e99c,this[_0x44cb61(0x13a)]),_0x2b2a3e=Math['abs'](_0x235d8b-this[_0x44cb61(0x131)]),_0x2fb542=Math['abs'](_0x39e99c-this[_0x44cb61(0x13a)]);Object[_0x44cb61(0x160)](this['selectionBox'][_0x44cb61(0x170)],{'left':_0x3c269f+'px','top':_0xba5469+'px','width':_0x2b2a3e+'px','height':_0x2fb542+'px'}),this[_0x44cb61(0x17d)](_0x3c269f,_0xba5469,_0x2b2a3e,_0x2fb542);}),window[_0xf38ad9(0x14b)]('pointerup',_0x5256e4=>{const _0x2d8246=_0xf38ad9;if(!this[_0x2d8246(0x14d)]||!this[_0x2d8246(0x165)])return;if(isMobileDevice()&&_0x5256e4[_0x2d8246(0x167)]!==this[_0x2d8246(0x18c)])return;this['isDragging']=![],this['getIcons']()[_0x2d8246(0x179)](_0x100d2e=>{const _0x42401d=_0x2d8246;_0x100d2e[_0x42401d(0x188)]['contains'](_0x42401d(0x12b))&&(_0x100d2e['classList']['remove']('hover-by-selection'),_0x100d2e['classList'][_0x42401d(0x135)](_0x42401d(0x157)),this[_0x42401d(0x14a)][_0x42401d(0x135)](_0x100d2e));}),this[_0x2d8246(0x165)]?.[_0x2d8246(0x130)]&&(this[_0x2d8246(0x165)][_0x2d8246(0x130)][_0x2d8246(0x144)](this['selectionBox']),this[_0x2d8246(0x165)]=null),this[_0x2d8246(0x18c)]=null;});}[a9_0x2faf26(0x17d)](_0x3d4bcf,_0x3bf249,_0x128288,_0x5e1698){const _0x43719b=a9_0x2faf26,_0x529ae5={'left':_0x3d4bcf,'top':_0x3bf249,'right':_0x3d4bcf+_0x128288,'bottom':_0x3bf249+_0x5e1698};this[_0x43719b(0x132)]()['forEach'](_0x22378e=>{const _0x92c5b3=_0x43719b,_0x279133=_0x22378e[_0x92c5b3(0x147)](),_0x543dfd=this[_0x92c5b3(0x181)][_0x92c5b3(0x147)](),_0x786e5c={'left':_0x279133[_0x92c5b3(0x159)]-_0x543dfd[_0x92c5b3(0x159)],'top':_0x279133[_0x92c5b3(0x12c)]-_0x543dfd[_0x92c5b3(0x12c)],'right':_0x279133[_0x92c5b3(0x129)]-_0x543dfd[_0x92c5b3(0x159)],'bottom':_0x279133[_0x92c5b3(0x172)]-_0x543dfd[_0x92c5b3(0x12c)]},_0x2cfa96=!(_0x786e5c[_0x92c5b3(0x129)]<_0x529ae5[_0x92c5b3(0x159)]||_0x786e5c[_0x92c5b3(0x159)]>_0x529ae5[_0x92c5b3(0x129)]||_0x786e5c[_0x92c5b3(0x172)]<_0x529ae5[_0x92c5b3(0x12c)]||_0x786e5c['top']>_0x529ae5['bottom']);_0x2cfa96?_0x22378e[_0x92c5b3(0x188)][_0x92c5b3(0x135)]('hover-by-selection'):_0x22378e[_0x92c5b3(0x188)][_0x92c5b3(0x155)](_0x92c5b3(0x12b));});}[a9_0x2faf26(0x168)](_0x5ccc07,_0x31da39){const _0xd1786d=a9_0x2faf26;_0x31da39?_0x5ccc07['classList'][_0xd1786d(0x142)](_0xd1786d(0x157))?(_0x5ccc07['classList'][_0xd1786d(0x155)]('selected'),this[_0xd1786d(0x14a)]['delete'](_0x5ccc07)):(_0x5ccc07[_0xd1786d(0x188)][_0xd1786d(0x135)](_0xd1786d(0x157)),this[_0xd1786d(0x14a)]['add'](_0x5ccc07)):(this[_0xd1786d(0x15e)](),_0x5ccc07['classList']['add']('selected'),this['selectedIcons'][_0xd1786d(0x135)](_0x5ccc07));}[a9_0x2faf26(0x16f)](_0x2769fb,_0x46e723=!![]){const _0x3616fc=a9_0x2faf26;if(_0x46e723)this[_0x3616fc(0x15e)]();_0x2769fb[_0x3616fc(0x188)][_0x3616fc(0x135)](_0x3616fc(0x157)),this[_0x3616fc(0x14a)][_0x3616fc(0x135)](_0x2769fb);}[a9_0x2faf26(0x15e)](){const _0x5cc356=a9_0x2faf26;this[_0x5cc356(0x132)]()[_0x5cc356(0x179)](_0x3ec566=>{const _0xd6b8fc=_0x5cc356;_0x3ec566[_0xd6b8fc(0x188)][_0xd6b8fc(0x155)](_0xd6b8fc(0x157),'hover-by-selection');}),this[_0x5cc356(0x14a)][_0x5cc356(0x186)]();}[a9_0x2faf26(0x137)](){const _0x4bfec3=a9_0x2faf26;this[_0x4bfec3(0x132)]()[_0x4bfec3(0x179)](_0x2f0bf8=>_0x2f0bf8[_0x4bfec3(0x188)]['remove']('hover-by-selection'));}[a9_0x2faf26(0x15b)](){const _0x38123c=a9_0x2faf26;this[_0x38123c(0x14d)]=![],this[_0x38123c(0x18f)]=![],this[_0x38123c(0x18c)]=null,this[_0x38123c(0x165)]&&this[_0x38123c(0x165)][_0x38123c(0x130)]&&(this[_0x38123c(0x165)][_0x38123c(0x130)][_0x38123c(0x144)](this[_0x38123c(0x165)]),this['selectionBox']=null),this[_0x38123c(0x137)]();}}