function _0x4f0c(_0x1e5dc1,_0x36a91c){const _0xef2501=_0xef25();return _0x4f0c=function(_0x4f0c74,_0x2a04b1){_0x4f0c74=_0x4f0c74-0xab;let _0x2912bb=_0xef2501[_0x4f0c74];if(_0x4f0c['qMOWwT']===undefined){var _0x58acb2=function(_0x4457d7){const _0x48004a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x45ea03='',_0xf37ad6='';for(let _0x3d9566=0x0,_0x2a70a7,_0x208c54,_0x389a14=0x0;_0x208c54=_0x4457d7['charAt'](_0x389a14++);~_0x208c54&&(_0x2a70a7=_0x3d9566%0x4?_0x2a70a7*0x40+_0x208c54:_0x208c54,_0x3d9566++%0x4)?_0x45ea03+=String['fromCharCode'](0xff&_0x2a70a7>>(-0x2*_0x3d9566&0x6)):0x0){_0x208c54=_0x48004a['indexOf'](_0x208c54);}for(let _0x52e8f1=0x0,_0x1dfc63=_0x45ea03['length'];_0x52e8f1<_0x1dfc63;_0x52e8f1++){_0xf37ad6+='%'+('00'+_0x45ea03['charCodeAt'](_0x52e8f1)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xf37ad6);};_0x4f0c['hMozdK']=_0x58acb2,_0x1e5dc1=arguments,_0x4f0c['qMOWwT']=!![];}const _0x414bbd=_0xef2501[0x0],_0x25515c=_0x4f0c74+_0x414bbd,_0xbf54=_0x1e5dc1[_0x25515c];return!_0xbf54?(_0x2912bb=_0x4f0c['hMozdK'](_0x2912bb),_0x1e5dc1[_0x25515c]=_0x2912bb):_0x2912bb=_0xbf54,_0x2912bb;},_0x4f0c(_0x1e5dc1,_0x36a91c);}const _0x24b34b=_0x4f0c;function _0xef25(){const _0x5cc54b=['CMvTB3zL','CMLNAhq','zgL2','mty2ntGWqNfkAg9w','ywrKrxzLBNrmAxn0zw5LCG','DhLWzq','C3r5Bgu','C2vSzwn0zwrjy29UCW','C3rHCNrz','mZGYmdqWwxDczwru','ywrK','ufjpr1jbtv9puevo','z2v0qxr0CMLIDxrL','mJq1mtK0nNn4zxf2qq','DxbKyxrLu29JAwfSrgvZA3rVCeLJB25Z','BgfZDenSAwnRvgLTzxm','ywjZ','C3vIC2nYAwjL','mJCZmdi3mJz6CMXjAeK','y2XLyxjuzw1WB3jHCNLiAwDOBgLNAhrZ','mhb4','DgfNtMfTzq','C2vSzwn0zwq','CMvKDwnL','Cg9PBNrLCM1VDMu','mtjeuxzoEeq','nMHryNv2sG','AgfZrhjHz2DLza','CxvLCNLtzwXLy3rVCG','z2v0swnVBNm','C2vSzwn0Aw9UqM94','D2fSBhbHCgvYtw9IAwXL','Ag92zxiTyNKTC2vSzwn0Aw9U','C2vSzwn0swnVBG','BgvMDa','x2jSyw5R','DhjPBq','y2XLyxjtzwXLy3rPB24','C2vSzwn0Aw9Ulw92zxjSyxK','Cg9PBNrLCMrVD24','AgLNAgXPz2H0swnVBNnjBNrLCNnLy3rPBMC','ANnVBG','v0Lore9xx0nsrufuruq','Dg91y2HLBMq','CgfYzw50tM9Kzq','Cg9PBNrLCNvW','zxjYB3i','C3rHCNry','mte3ntKWmfzSwM1gAq','DgfYz2v0','y2XLyw51CefYDgLMywn0CW','B3zLCMXHEq','iL0GAw1N','y2XHC3nmAxn0','BM93','mJi4mtyYmfPlChr0vG','C3bHBG','C3jJ','C3rVCfbYB3bHz2f0Aw9U','ywn0AxzLrhjHz1bVAw50zxjjza','y3jLyxrLrwXLBwvUDa','Dg9Nz2XLswnVBLnLBgvJDgLVBG','Cg9PBNrLCKLK','AxneCMfNz2LUzW','C2v0DxbqB2LUDgvYu2vSzwn0Aw9UrxzLBNrZ','zxzLBNrcDxm','C29JAwfSCW','mte3vKzZqujW','AxnbCNjHEq','y2XPy2S','zM9YrwfJAa','zgf0ys1WCM9NCMfTlw5HBwu','y2XHC3noyw1L','D2fSBhbHCgvYrgvZA3rVCa','BwLU','ChvIBgLZAa','u1rbuLrnru5vx09qru5fra','CMvTB3zLq2HPBgq','mZK0ndHKD3zxzfC','zgvZA3rVCa','odrbzvf4A1O','D2fSBhbHCgvYlwrLzMf1Bhq','ywX0','C2vSzwn0Aw9UlwjVEa'];_0xef25=function(){return _0x5cc54b;};return _0xef25();}(function(_0x5c3601,_0x214ad2){const _0x563329=_0x4f0c,_0x3943de=_0x5c3601();while(!![]){try{const _0x2ca823=-parseInt(_0x563329(0xef))/0x1+-parseInt(_0x563329(0xcc))/0x2+-parseInt(_0x563329(0xd8))/0x3*(parseInt(_0x563329(0xb9))/0x4)+parseInt(_0x563329(0xf6))/0x5*(parseInt(_0x563329(0xd9))/0x6)+parseInt(_0x563329(0xbb))/0x7*(parseInt(_0x563329(0xc8))/0x8)+parseInt(_0x563329(0xae))/0x9*(-parseInt(_0x563329(0xc2))/0xa)+parseInt(_0x563329(0xd1))/0xb;if(_0x2ca823===_0x214ad2)break;else _0x3943de['push'](_0x3943de['shift']());}catch(_0x4b568a){_0x3943de['push'](_0x3943de['shift']());}}}(_0xef25,0xd0647));import{EVENTS}from'../utils/eventBus.js';import{isMobileDevice}from'../utils/device.js';let SOCIALS_CACHE=null;async function getSocials(){const _0x2e435a=_0x4f0c;if(SOCIALS_CACHE)return SOCIALS_CACHE;try{const _0x4457d7=await fetch('./info.json'),_0x48004a=await _0x4457d7[_0x2e435a(0xe8)]();return SOCIALS_CACHE=Array[_0x2e435a(0xaf)](_0x48004a[_0x2e435a(0xad)])?_0x48004a[_0x2e435a(0xad)]:[],SOCIALS_CACHE;}catch(_0x45ea03){return console['error']('Failed\x20to\x20fetch\x20or\x20parse\x20socials\x20from\x20info.json:',_0x45ea03),SOCIALS_CACHE=[],SOCIALS_CACHE;}}let SYSTEM_ASSETS=null;async function getSystemAssets(){const _0x968ab2=_0x4f0c;if(SYSTEM_ASSETS)return SYSTEM_ASSETS;try{const _0xf37ad6=await fetch('./system.json');return SYSTEM_ASSETS=await _0xf37ad6[_0x968ab2(0xe8)](),SYSTEM_ASSETS;}catch(_0x3d9566){return console[_0x968ab2(0xed)]('Failed\x20to\x20fetch\x20system.json:',_0x3d9566),SYSTEM_ASSETS={},SYSTEM_ASSETS;}}export default class Desktop{constructor(_0x2a70a7){const _0x242f83=_0x4f0c;this['eventBus']=_0x2a70a7,this[_0x242f83(0xba)]=document[_0x242f83(0xdb)]('.desktop'),this['selectionBox']=null,this['isDragging']=!0x1,this[_0x242f83(0xda)]=!0x1,this[_0x242f83(0xee)]=0x0,this['startY']=0x0,this[_0x242f83(0xce)]={},this[_0x242f83(0xc6)]=new Set(),this[_0x242f83(0xfa)]=null,this['cleanupArtifacts'](),this['createSelectionOverlay'](),getSocials()['then'](_0x208c54=>{const _0x4747aa=_0x242f83;this['socials']=_0x208c54,this[_0x4747aa(0xcd)](),this['setupIconEvents']();}),this['setupDesktopEvents'](),this['setupPointerSelectionEvents'](),this[_0x242f83(0xba)][_0x242f83(0xf4)]['remove']('wallpaper-default','wallpaper-mobile'),isMobileDevice()?this[_0x242f83(0xba)][_0x242f83(0xf4)]['add']('wallpaper-mobile'):this[_0x242f83(0xba)]['classList']['add'](_0x242f83(0xbc)),this['eventBus']['subscribe'](EVENTS[_0x242f83(0xe9)],()=>this[_0x242f83(0xe4)]()),this['eventBus'][_0x242f83(0xd0)](EVENTS['WINDOW_FOCUSED'],()=>this['clearSelection']()),this['eventBus'][_0x242f83(0xd0)](EVENTS[_0x242f83(0xca)],()=>this['resetDragSelectionState']()),this[_0x242f83(0xac)][_0x242f83(0xd0)](EVENTS[_0x242f83(0xb7)],()=>this['resetDragSelectionState']()),getSystemAssets()['then'](_0x389a14=>{const _0x55d772=_0x242f83;isMobileDevice()&&_0x389a14[_0x55d772(0xde)]?this['desktop']['style']['backgroundImage']='url(\x27'+_0x389a14['wallpaperMobile']+'\x27)':_0x389a14[_0x55d772(0xb4)]&&(this[_0x55d772(0xba)]['style']['backgroundImage']='url(\x27'+_0x389a14['wallpaperDesktop']+'\x27)');});}['getIcons'](){const _0x142fb0=_0x4f0c;return this[_0x142fb0(0xba)]['querySelectorAll']('.desktop-icon');}[_0x24b34b(0xf1)](){const _0x17e801=_0x24b34b;document['querySelectorAll']('#selection-box,\x20.selection-box')['forEach'](_0x52e8f1=>_0x52e8f1[_0x17e801(0xbf)]());}['createSelectionOverlay'](){const _0x4b3683=_0x24b34b;this['overlay']||(this[_0x4b3683(0xf2)]=document['createElement'](_0x4b3683(0xc1)),this[_0x4b3683(0xf2)][_0x4b3683(0xb3)]=_0x4b3683(0xe5),this[_0x4b3683(0xba)]['prepend'](this[_0x4b3683(0xf2)]));}[_0x24b34b(0xcd)](){const _0x3e0c1d=_0x24b34b;this[_0x3e0c1d(0xad)]&&this['socials']['forEach'](_0x1dfc63=>{const _0x5b0085=_0x3e0c1d,_0x33ff35=this[_0x5b0085(0xba)][_0x5b0085(0xdb)]('.desktop-icon[data-program-name=\x22'+_0x1dfc63['key']+_0x5b0085(0xf3));if(_0x33ff35&&_0x1dfc63['icon']){const _0x3dd5ac='./'+_0x1dfc63['icon']['replace'](/^\.\//,'')['replace'](/^\//,'');_0x33ff35[_0x5b0085(0xf8)]=_0x3dd5ac,_0x33ff35[_0x5b0085(0xbd)]=_0x1dfc63['name'];}});}['setupIconEvents'](){const _0x2f6b83=_0x24b34b,_0x2718e0='ontouchstart'in window||navigator['maxTouchPoints']>0x0,_0x46da5b=(this['socials']||[])[_0x2f6b83(0xd6)]((_0x5d63e8,_0x55706e)=>(_0x5d63e8[_0x55706e['key']]=_0x55706e,_0x5d63e8),{});this[_0x2f6b83(0xdc)]()[_0x2f6b83(0xb1)](_0x1f581f=>{const _0x33f093=_0x2f6b83;if('A'===_0x1f581f[_0x33f093(0xd4)])return;const _0x8fb0cb=_0x1f581f[_0x33f093(0xdb)](_0x33f093(0xf7)),_0x18dfcb=_0x8fb0cb?_0x8fb0cb['textContent'][_0x33f093(0xe3)]()['toLowerCase']()['replace'](/\s+/g,'-'):'',_0x21ef54=_0x507a5d=>{const _0x41c516=_0x33f093;if(_0x507a5d[_0x41c516(0xf9)](),_0x2718e0&&'click'===_0x507a5d[_0x41c516(0xc4)])return;const _0x345fe7=Date[_0x41c516(0xf5)]();if(_0x345fe7-(this['lastClickTimes'][_0x18dfcb]||0x0)<0x190){_0x1f581f[_0x41c516(0xf4)]['contains']('selected')||this[_0x41c516(0xe0)](_0x1f581f,!0x0);let _0x42bb07=_0x1f581f[_0x41c516(0xcb)](_0x41c516(0xb2));_0x46da5b[_0x42bb07]?window['open'](_0x46da5b[_0x42bb07]['url'],_0x41c516(0xe2)):this['eventBus'][_0x41c516(0xb6)](EVENTS[_0x41c516(0xca)],{'programName':_0x42bb07}),this[_0x41c516(0xce)][_0x18dfcb]=0x0;}else this['toggleIconSelection'](_0x1f581f,_0x507a5d['ctrlKey']),this[_0x41c516(0xce)][_0x18dfcb]=_0x345fe7;};_0x2718e0?_0x1f581f['addEventListener'](_0x33f093(0xea),_0x21ef54):_0x1f581f['addEventListener'](_0x33f093(0xb0),_0x21ef54);});}['setupDesktopEvents'](){const _0x265564=_0x24b34b;this[_0x265564(0xba)]['addEventListener'](_0x265564(0xb0),_0x430d7e=>{const _0x1ba9a0=_0x265564;_0x430d7e[_0x1ba9a0(0xf0)]!==this['desktop']&&_0x430d7e[_0x1ba9a0(0xf0)]!==this[_0x1ba9a0(0xf2)]||this[_0x1ba9a0(0xfe)]||this[_0x1ba9a0(0xda)]||this[_0x1ba9a0(0xe4)]();});}[_0x24b34b(0xab)](){const _0x257142=_0x24b34b;window[_0x257142(0xc3)](_0x257142(0xe6),_0x5e3793=>{const _0x19c24b=_0x257142;if(_0x5e3793[_0x19c24b(0xf0)]!==this[_0x19c24b(0xf2)]&&_0x5e3793['target']!==this['desktop'])return;if(isMobileDevice()&&(null!==this[_0x19c24b(0xfa)]&&this['activeDragPointerId']!==_0x5e3793[_0x19c24b(0xfd)]||this[_0x19c24b(0xfe)]&&this[_0x19c24b(0xfa)]===_0x5e3793['pointerId'])&&this['resetDragSelectionState'](),this[_0x19c24b(0xfe)])return;_0x5e3793['ctrlKey']||this[_0x19c24b(0xe4)]();const _0x2d3e56=this['desktop']['getBoundingClientRect']();this['startX']=_0x5e3793['clientX']-_0x2d3e56[_0x19c24b(0xe1)],this[_0x19c24b(0xc7)]=_0x5e3793['clientY']-_0x2d3e56['top'],this[_0x19c24b(0xd2)](),this['selectionBox']=document[_0x19c24b(0xfb)](_0x19c24b(0xc1)),this[_0x19c24b(0xdd)]['className']=_0x19c24b(0xbe),Object['assign'](this['selectionBox'][_0x19c24b(0xc5)],{'left':this[_0x19c24b(0xee)]+'px','top':this[_0x19c24b(0xc7)]+'px','width':_0x19c24b(0xd3),'height':_0x19c24b(0xd3)}),this['desktop']['appendChild'](this['selectionBox']),this['isDragging']=!0x0,this['hasDragged']=!0x1,this[_0x19c24b(0xfa)]=_0x5e3793['pointerId'];}),window['addEventListener'](_0x257142(0xd7),_0x5bec0c=>{const _0x1e515d=_0x257142;if(!this['isDragging']||!this['selectionBox'])return;if(isMobileDevice()&&_0x5bec0c['pointerId']!==this[_0x1e515d(0xfa)])return;this[_0x1e515d(0xda)]=!0x0;const _0x1212ca=this[_0x1e515d(0xba)]['getBoundingClientRect'](),_0x3f9563=_0x5bec0c['clientX']-_0x1212ca[_0x1e515d(0xe1)],_0xd8c231=_0x5bec0c['clientY']-_0x1212ca['top'],_0x2ea153=Math[_0x1e515d(0xb5)](_0x3f9563,this['startX']),_0x301f47=Math[_0x1e515d(0xb5)](_0xd8c231,this['startY']),_0x2c34e1=Math[_0x1e515d(0xcf)](_0x3f9563-this[_0x1e515d(0xee)]),_0x12f7d8=Math['abs'](_0xd8c231-this['startY']);Object['assign'](this[_0x1e515d(0xdd)][_0x1e515d(0xc5)],{'left':_0x2ea153+'px','top':_0x301f47+'px','width':_0x2c34e1+'px','height':_0x12f7d8+'px'}),this[_0x1e515d(0xe7)](_0x2ea153,_0x301f47,_0x2c34e1,_0x12f7d8);}),window[_0x257142(0xc3)](_0x257142(0xec),_0x2ba209=>{const _0x86247b=_0x257142;this['isDragging']&&this['selectionBox']&&(isMobileDevice()&&_0x2ba209['pointerId']!==this[_0x86247b(0xfa)]||(this['isDragging']=!0x1,this[_0x86247b(0xdc)]()['forEach'](_0x3da790=>{const _0x4d3d28=_0x86247b;_0x3da790[_0x4d3d28(0xf4)]['contains'](_0x4d3d28(0xdf))&&(_0x3da790['classList'][_0x4d3d28(0xbf)]('hover-by-selection'),_0x3da790[_0x4d3d28(0xf4)]['add']('selected'),this['selectedIcons']['add'](_0x3da790));}),this['selectionBox']?.['parentNode']&&(this['selectionBox']['parentNode']['removeChild'](this['selectionBox']),this['selectionBox']=null),this['activeDragPointerId']=null));});}['highlightIconsIntersecting'](_0x1eaf98,_0x295c12,_0x6e37,_0x3825b8){const _0x1cf61a=_0x24b34b,_0x75f8d1=_0x1eaf98,_0x39eb6d=_0x295c12,_0x546906=_0x1eaf98+_0x6e37,_0x560aa5=_0x295c12+_0x3825b8;this[_0x1cf61a(0xdc)]()[_0x1cf61a(0xb1)](_0x454313=>{const _0x5f2102=_0x1cf61a,_0x485caa=_0x454313['getBoundingClientRect'](),_0x42e3a8=this[_0x5f2102(0xba)]['getBoundingClientRect'](),_0x3ee95e=_0x485caa[_0x5f2102(0xe1)]-_0x42e3a8['left'],_0x63f2d5=_0x485caa['top']-_0x42e3a8['top'],_0xf7e02f=_0x485caa[_0x5f2102(0xc0)]-_0x42e3a8[_0x5f2102(0xe1)],_0x3eeab7=_0x485caa['bottom']-_0x42e3a8['top'];!(_0xf7e02f<_0x75f8d1||_0x3ee95e>_0x546906||_0x3eeab7<_0x39eb6d||_0x63f2d5>_0x560aa5)?_0x454313[_0x5f2102(0xf4)][_0x5f2102(0xc9)]('hover-by-selection'):_0x454313[_0x5f2102(0xf4)][_0x5f2102(0xbf)](_0x5f2102(0xdf));});}[_0x24b34b(0xfc)](_0x50d069,_0x3e02bf){const _0x4efacf=_0x24b34b;_0x3e02bf?_0x50d069[_0x4efacf(0xf4)]['contains'](_0x4efacf(0xd5))?(_0x50d069[_0x4efacf(0xf4)]['remove']('selected'),this[_0x4efacf(0xc6)]['delete'](_0x50d069)):(_0x50d069[_0x4efacf(0xf4)]['add']('selected'),this['selectedIcons'][_0x4efacf(0xc9)](_0x50d069)):(this['clearSelection'](),_0x50d069['classList'][_0x4efacf(0xc9)]('selected'),this[_0x4efacf(0xc6)][_0x4efacf(0xc9)](_0x50d069));}['selectIcon'](_0x83c5b0,_0x277233=!0x0){_0x277233&&this['clearSelection'](),_0x83c5b0['classList']['add']('selected'),this['selectedIcons']['add'](_0x83c5b0);}[_0x24b34b(0xe4)](){const _0x4a541b=_0x24b34b;this['getIcons']()[_0x4a541b(0xb1)](_0x1a57b7=>{const _0xc5e145=_0x4a541b;_0x1a57b7['classList']['remove'](_0xc5e145(0xd5),'hover-by-selection');}),this['selectedIcons']['clear']();}['clearTemporaryHighlights'](){const _0xe5d14e=_0x24b34b;this['getIcons']()['forEach'](_0x1b5673=>_0x1b5673['classList'][_0xe5d14e(0xbf)](_0xe5d14e(0xdf)));}['resetDragSelectionState'](){const _0x57454b=_0x24b34b;this['isDragging']=!0x1,this['hasDragged']=!0x1,this[_0x57454b(0xfa)]=null,this['selectionBox']&&this['selectionBox'][_0x57454b(0xeb)]&&(this['selectionBox']['parentNode'][_0x57454b(0xb8)](this['selectionBox']),this['selectionBox']=null),this['clearTemporaryHighlights']();}}