const _0x33c5a3=_0x12b7;(function(_0x289085,_0x9966ba){const _0x444373=_0x12b7,_0x3fe743=_0x289085();while(!![]){try{const _0x30afde=-parseInt(_0x444373(0xa2))/0x1+-parseInt(_0x444373(0xa3))/0x2+-parseInt(_0x444373(0xbb))/0x3+-parseInt(_0x444373(0x9c))/0x4*(parseInt(_0x444373(0x96))/0x5)+-parseInt(_0x444373(0xa6))/0x6*(-parseInt(_0x444373(0x8a))/0x7)+-parseInt(_0x444373(0x80))/0x8+parseInt(_0x444373(0x83))/0x9*(parseInt(_0x444373(0x9a))/0xa);if(_0x30afde===_0x9966ba)break;else _0x3fe743['push'](_0x3fe743['shift']());}catch(_0x1fd819){_0x3fe743['push'](_0x3fe743['shift']());}}}(_0x4aa2,0x1ddf5));import{EVENTS}from'../utils/eventBus.js';function _0x12b7(_0x288e04,_0x5f47ec){const _0x4aa2f2=_0x4aa2();return _0x12b7=function(_0x12b763,_0x5e5954){_0x12b763=_0x12b763-0x71;let _0x47c9a3=_0x4aa2f2[_0x12b763];if(_0x12b7['YyNDtI']===undefined){var _0xbf0581=function(_0x36503d){const _0x179210='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x262de5='',_0x437d89='';for(let _0x4b41bb=0x0,_0x29adb6,_0x5c4f71,_0x188684=0x0;_0x5c4f71=_0x36503d['charAt'](_0x188684++);~_0x5c4f71&&(_0x29adb6=_0x4b41bb%0x4?_0x29adb6*0x40+_0x5c4f71:_0x5c4f71,_0x4b41bb++%0x4)?_0x262de5+=String['fromCharCode'](0xff&_0x29adb6>>(-0x2*_0x4b41bb&0x6)):0x0){_0x5c4f71=_0x179210['indexOf'](_0x5c4f71);}for(let _0x3f02dc=0x0,_0x3d1fda=_0x262de5['length'];_0x3f02dc<_0x3d1fda;_0x3f02dc++){_0x437d89+='%'+('00'+_0x262de5['charCodeAt'](_0x3f02dc)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x437d89);};_0x12b7['TjRORk']=_0xbf0581,_0x288e04=arguments,_0x12b7['YyNDtI']=!![];}const _0x1f7a37=_0x4aa2f2[0x0],_0x535301=_0x12b763+_0x1f7a37,_0x465ab2=_0x288e04[_0x535301];return!_0x465ab2?(_0x47c9a3=_0x12b7['TjRORk'](_0x47c9a3),_0x288e04[_0x535301]=_0x47c9a3):_0x47c9a3=_0x465ab2,_0x47c9a3;},_0x12b7(_0x288e04,_0x5f47ec);}import{isMobileDevice}from'../utils/device.js';let SOCIALS_CACHE=null;function _0x4aa2(){const _0x518800=['nwnYD0LMwa','y29UDgfPBNm','AxneCMfNz2LUzW','ywn0AxzLrhjHz1bVAw50zxjjza','nJm3mhz3AvH6rW','rMfPBgvKihrVigzLDgnOig9YihbHCNnLihnVy2LHBhmGzNjVBsbPBMzVlMPZB246','ndi5ntaWrgv1zNDo','lI9PBMzVlMPZB24','zxjYB3i','D2fSBhbHCgvYrgvZA3rVCa','i3nLBgvJDgLVBI1IB3GSic5ZzwXLy3rPB24TyM94','DxjS','mtCWodyWrvPdvgLd','mtCZnJC4DKnrv2L1','z2v0qM91BMrPBMDdBgLLBNrszwn0','C2v0DxbqB2LUDgvYu2vSzwn0Aw9UrxzLBNrZ','mJr2rujUBw8','y2XHC3nmAxn0','AxnbCNjHEq','CxvLCNLtzwXLy3rVCKfSBa','DgHLBG','y3rYBeTLEq','yMfJA2DYB3vUzeLTywDL','C2v0Dxbjy29UrxzLBNrZ','Dg9mB3DLCKnHC2u','CMvWBgfJzq','C3vIC2nYAwjL','v0Lore9xx0nsrufuruq','lMrLC2T0B3aTAwnVBG','A2v5','Dg9Nz2XLswnVBLnLBgvJDgLVBG','AwnVBG','Ag92zxiTyNKTC2vSzwn0Aw9U','CMvZzxreCMfNu2vSzwn0Aw9Uu3rHDgu','v0Lore9xx0zpq1vtruq','Cg9PBNrLCNvW','y2XLyxjtzwXLy3rPB24','mZi2odGZBfPqy1jb','ywX0','C2vSzwn0Aw9UqM94','C3bHBG','C3rVCfbYB3bHz2f0Aw9U','mhb4','BgfZDenSAwnRvgLTzxm','BM93','y2XHC3noyw1L','Bwf4vg91y2HqB2LUDhm','CMvTB3zLq2HPBgq','D2fSBhbHCgvYlw1VyMLSzq','C3r5Bgu','zgf0ys1WCM9NCMfTlw5HBwu','C2vSzwn0Aw9Ulw92zxjSyxK','z2v0swnVBNm','zM9YrwfJAa','C2vSzwn0zwq','DgfYz2v0','y2XPy2S','zgvSzxrL','BgvMDa','y3jLyxrLrwXLBwvUDa','AgfZrhjHz2DLza','ufjpr1jbtv9puevo','zgvZA3rVCa','C3rHCNry','z2v0qxr0CMLIDxrL','Dg9W','Dgv4DenVBNrLBNq','DxjSkcC','ywjZ','ywrK','lMrLC2T0B3aTAwnVBLTKyxrHlxbYB2DYyw0TBMfTzt0I','C2vSzwn0Aw9UlwjVEa','ChvIBgLZAa','AgLNAgXPz2H0swnVBNnjBNrLCNnLy3rPBMC','yM90Dg9T','C2vSzwn0swnVBG','C3rHCNrz','ChjLCgvUza','CgfYzw50tM9Kzq','mtq0nZa2nezgCg52uG','y2XLyxi','D2fSBhbHCgvYtw9IAwXL','mta5nZfMv0Lgt2q','DxbKyxrLu29JAwfSrgvZA3rVCeLJB25Z','y2XPzw50wa','zgL2','C29JAwfSCW','Cg9PBNrLCM1VDMu','Cg9PBNrLCKLK','mtm1mwH2t1j5wa','B3zLCMXHEq','y2XLyw51CefYDgLMywn0CW','B250B3vJAhn0yxj0','BwLU','DhjPBq','y3jLyxrLu2vSzwn0Aw9Ut3zLCMXHEq','ywrKrxzLBNrmAxn0zw5LCG','C2vSzwn0zwrjy29UCW','ANnVBG','y2XLyxjuzw1WB3jHCNLiAwDOBgLNAhrZ','zxzLBNrcDxm'];_0x4aa2=function(){return _0x518800;};return _0x4aa2();}async function getSocials(){const _0x4e157f=_0x12b7;if(SOCIALS_CACHE)return SOCIALS_CACHE;try{const _0x36503d=await fetch(_0x4e157f(0x9d)),_0x179210=await _0x36503d['json']();return SOCIALS_CACHE=Array[_0x4e157f(0xa8)](_0x179210[_0x4e157f(0x87)])?_0x179210[_0x4e157f(0x87)]:[],SOCIALS_CACHE;}catch(_0x262de5){return console['error'](_0x4e157f(0x9b),_0x262de5),SOCIALS_CACHE=[],SOCIALS_CACHE;}}let SYSTEM_ASSETS=null;async function getSystemAssets(){const _0xad206c=_0x12b7;if(SYSTEM_ASSETS)return SYSTEM_ASSETS;try{const _0x437d89=await fetch('./system.json');return SYSTEM_ASSETS=await _0x437d89[_0xad206c(0x93)](),SYSTEM_ASSETS;}catch(_0x4b41bb){return console[_0xad206c(0x9e)]('Failed\x20to\x20fetch\x20system.json:',_0x4b41bb),SYSTEM_ASSETS={},SYSTEM_ASSETS;}}export default class Desktop{constructor(_0x29adb6){const _0x1766f9=_0x12b7;this['eventBus']=_0x29adb6,this[_0x1766f9(0xd4)]=document['querySelector']('.desktop'),this[_0x1766f9(0xbd)]=null,this[_0x1766f9(0x98)]=!0x1,this['hasDragged']=!0x1,this[_0x1766f9(0xd5)]=0x0,this[_0x1766f9(0x7d)]=0x0,this['lastClickTimes']={},this['selectedIcons']=new Set(),this['activeDragPointerId']=null,this['cleanupArtifacts'](),this[_0x1766f9(0x90)](),getSocials()['then'](_0x5c4f71=>{this['socials']=_0x5c4f71,this['updateSocialDesktopIcons'](),this['setupIconEvents']();}),this['setupDesktopEvents'](),this[_0x1766f9(0xa5)](),this[_0x1766f9(0xd4)][_0x1766f9(0xa7)]['remove']('wallpaper-default',_0x1766f9(0xc6)),isMobileDevice()?this['desktop']['classList'][_0x1766f9(0x76)](_0x1766f9(0xc6)):this[_0x1766f9(0xd4)][_0x1766f9(0xa7)]['add']('wallpaper-default'),this['eventBus']['subscribe'](EVENTS[_0x1766f9(0xb1)],()=>this['clearSelection']()),this[_0x1766f9(0x95)]['subscribe'](EVENTS[_0x1766f9(0xb8)],()=>this[_0x1766f9(0xba)]()),this[_0x1766f9(0x95)][_0x1766f9(0xb0)](EVENTS[_0x1766f9(0xd3)],()=>this['resetDragSelectionState']()),this[_0x1766f9(0x95)][_0x1766f9(0xb0)](EVENTS['STARTMENU_OPENED'],()=>this[_0x1766f9(0xb7)]()),getSystemAssets()[_0x1766f9(0xaa)](_0x188684=>{const _0x372b2b=_0x1766f9;isMobileDevice()&&_0x188684[_0x372b2b(0x82)]?this['desktop'][_0x372b2b(0xc7)][_0x372b2b(0xac)]=_0x372b2b(0x74)+_0x188684[_0x372b2b(0x82)]+'\x27)':_0x188684[_0x372b2b(0x9f)]&&(this['desktop'][_0x372b2b(0xc7)]['backgroundImage']=_0x372b2b(0x74)+_0x188684[_0x372b2b(0x9f)]+'\x27)');});}['getIcons'](){const _0x2431a2=_0x12b7;return this['desktop'][_0x2431a2(0xa9)](_0x2431a2(0xb2));}[_0x33c5a3(0x8c)](){const _0x5df7fa=_0x33c5a3;document['querySelectorAll'](_0x5df7fa(0xa0))[_0x5df7fa(0xcb)](_0x3f02dc=>_0x3f02dc['remove']());}['createSelectionOverlay'](){const _0x22a61b=_0x33c5a3;this[_0x22a61b(0x8b)]||(this[_0x22a61b(0x8b)]=document['createElement'](_0x22a61b(0x86)),this[_0x22a61b(0x8b)]['className']=_0x22a61b(0xc9),this['desktop'][_0x22a61b(0x7e)](this[_0x22a61b(0x8b)]));}[_0x33c5a3(0x84)](){const _0x4d84c5=_0x33c5a3;this[_0x4d84c5(0x87)]&&this[_0x4d84c5(0x87)]['forEach'](_0x3d1fda=>{const _0x443dca=_0x4d84c5,_0x5b6596=this[_0x443dca(0xd4)]['querySelector'](_0x443dca(0x77)+_0x3d1fda[_0x443dca(0xb3)]+'\x22]\x20img');if(_0x5b6596&&_0x3d1fda['icon']){const _0x5c79bc='./'+_0x3d1fda[_0x443dca(0xb5)][_0x443dca(0xaf)](/^\.\//,'')[_0x443dca(0xaf)](/^\//,'');_0x5b6596['src']=_0x5c79bc,_0x5b6596[_0x443dca(0xbc)]=_0x3d1fda['name'];}});}[_0x33c5a3(0xad)](){const _0x189155=_0x33c5a3,_0x2291da=_0x189155(0x8d)in window||navigator[_0x189155(0xc4)]>0x0,_0x99423d=(this[_0x189155(0x87)]||[])['reduce']((_0x3a4a89,_0x5e8576)=>(_0x3a4a89[_0x5e8576['key']]=_0x5e8576,_0x3a4a89),{});this[_0x189155(0xca)]()['forEach'](_0x552d66=>{const _0x1ee88b=_0x189155;if('A'===_0x552d66['tagName'])return;const _0x3a8f7f=_0x552d66['querySelector'](_0x1ee88b(0xbe)),_0x3c4d44=_0x3a8f7f?_0x3a8f7f[_0x1ee88b(0x73)][_0x1ee88b(0x8f)]()[_0x1ee88b(0xae)]()['replace'](/\s+/g,'-'):'',_0x5f2bae=_0xabf6f0=>{const _0x1f2fe8=_0x1ee88b;if(_0xabf6f0[_0x1f2fe8(0xbf)](),_0x2291da&&'click'===_0xabf6f0['type'])return;const _0x2bb1d3=Date[_0x1f2fe8(0xc2)]();if(_0x2bb1d3-(this['lastClickTimes'][_0x3c4d44]||0x0)<0x190){_0x552d66['classList'][_0x1f2fe8(0x97)]('selected')||this[_0x1f2fe8(0x7c)](_0x552d66,!0x0);let _0x4644ae=_0x552d66[_0x1f2fe8(0x71)](_0x1f2fe8(0xc8));_0x99423d[_0x4644ae]?window['open'](_0x99423d[_0x4644ae][_0x1f2fe8(0xa1)],'_blank'):this['eventBus'][_0x1f2fe8(0x79)](EVENTS['PROGRAM_OPEN'],{'programName':_0x4644ae}),this['lastClickTimes'][_0x3c4d44]=0x0;}else this[_0x1f2fe8(0xb4)](_0x552d66,_0xabf6f0[_0x1f2fe8(0xab)]),this[_0x1f2fe8(0xc1)][_0x3c4d44]=_0x2bb1d3;};_0x2291da?_0x552d66['addEventListener']('touchend',_0x5f2bae):_0x552d66['addEventListener'](_0x1ee88b(0xce),_0x5f2bae);});}['setupDesktopEvents'](){this['desktop']['addEventListener']('click',_0x589f03=>{const _0x4c752e=_0x12b7;_0x589f03['target']!==this['desktop']&&_0x589f03[_0x4c752e(0xcd)]!==this['overlay']||this[_0x4c752e(0x98)]||this[_0x4c752e(0xd2)]||this[_0x4c752e(0xba)]();});}['setupPointerSelectionEvents'](){const _0x214b97=_0x33c5a3;window['addEventListener']('pointerdown',_0x530bf2=>{const _0x363d7f=_0x12b7;if(_0x530bf2[_0x363d7f(0xcd)]!==this['overlay']&&_0x530bf2['target']!==this[_0x363d7f(0xd4)])return;if(isMobileDevice()&&(null!==this['activeDragPointerId']&&this[_0x363d7f(0x99)]!==_0x530bf2['pointerId']||this['isDragging']&&this['activeDragPointerId']===_0x530bf2['pointerId'])&&this['resetDragSelectionState'](),this[_0x363d7f(0x98)])return;_0x530bf2[_0x363d7f(0xab)]||this[_0x363d7f(0xba)]();const _0x2f1a08=this['desktop'][_0x363d7f(0xa4)]();this['startX']=_0x530bf2['clientX']-_0x2f1a08[_0x363d7f(0xd0)],this['startY']=_0x530bf2['clientY']-_0x2f1a08['top'],this[_0x363d7f(0x94)](),this[_0x363d7f(0xbd)]=document[_0x363d7f(0xd1)]('div'),this['selectionBox'][_0x363d7f(0xc3)]=_0x363d7f(0x78),Object['assign'](this[_0x363d7f(0xbd)][_0x363d7f(0xc7)],{'left':this['startX']+'px','top':this['startY']+'px','width':'0px','height':_0x363d7f(0xc0)}),this['desktop']['appendChild'](this[_0x363d7f(0xbd)]),this[_0x363d7f(0x98)]=!0x0,this['hasDragged']=!0x1,this['activeDragPointerId']=_0x530bf2[_0x363d7f(0x89)];}),window[_0x214b97(0x91)](_0x214b97(0x88),_0x1e35b9=>{const _0x188b71=_0x214b97;if(!this[_0x188b71(0x98)]||!this['selectionBox'])return;if(isMobileDevice()&&_0x1e35b9[_0x188b71(0x89)]!==this[_0x188b71(0x99)])return;this[_0x188b71(0xd2)]=!0x0;const _0x921d1c=this['desktop'][_0x188b71(0xa4)](),_0x35e85f=_0x1e35b9[_0x188b71(0x85)]-_0x921d1c['left'],_0x665e03=_0x1e35b9['clientY']-_0x921d1c[_0x188b71(0x72)],_0x112d65=Math['min'](_0x35e85f,this[_0x188b71(0xd5)]),_0xaf17f6=Math[_0x188b71(0x8e)](_0x665e03,this['startY']),_0x23941b=Math['abs'](_0x35e85f-this['startX']),_0x36ad8c=Math[_0x188b71(0x75)](_0x665e03-this[_0x188b71(0x7d)]);Object['assign'](this[_0x188b71(0xbd)][_0x188b71(0xc7)],{'left':_0x112d65+'px','top':_0xaf17f6+'px','width':_0x23941b+'px','height':_0x36ad8c+'px'}),this['highlightIconsIntersecting'](_0x112d65,_0xaf17f6,_0x23941b,_0x36ad8c);}),window['addEventListener'](_0x214b97(0xb9),_0x657a13=>{const _0x459f29=_0x214b97;this['isDragging']&&this[_0x459f29(0xbd)]&&(isMobileDevice()&&_0x657a13['pointerId']!==this[_0x459f29(0x99)]||(this[_0x459f29(0x98)]=!0x1,this['getIcons']()[_0x459f29(0xcb)](_0x2bb831=>{const _0x21aef5=_0x459f29;_0x2bb831['classList'][_0x21aef5(0x97)](_0x21aef5(0xb6))&&(_0x2bb831[_0x21aef5(0xa7)]['remove'](_0x21aef5(0xb6)),_0x2bb831[_0x21aef5(0xa7)][_0x21aef5(0x76)](_0x21aef5(0xcc)),this['selectedIcons'][_0x21aef5(0x76)](_0x2bb831));}),this['selectionBox']?.['parentNode']&&(this['selectionBox'][_0x459f29(0x7f)]['removeChild'](this['selectionBox']),this[_0x459f29(0xbd)]=null),this[_0x459f29(0x99)]=null));});}[_0x33c5a3(0x7a)](_0x2b646f,_0x123114,_0x4e3cc0,_0x5d49db){const _0x532859=_0x33c5a3,_0x1e1c3b=_0x2b646f,_0x371b2c=_0x123114,_0x45674c=_0x2b646f+_0x4e3cc0,_0xd460f1=_0x123114+_0x5d49db;this[_0x532859(0xca)]()['forEach'](_0x3e431b=>{const _0x431f79=_0x532859,_0x1247e1=_0x3e431b[_0x431f79(0xa4)](),_0x45f1c3=this[_0x431f79(0xd4)][_0x431f79(0xa4)](),_0x529252=_0x1247e1['left']-_0x45f1c3['left'],_0x43ae18=_0x1247e1[_0x431f79(0x72)]-_0x45f1c3['top'],_0x46ef14=_0x1247e1['right']-_0x45f1c3[_0x431f79(0xd0)],_0x3f6e34=_0x1247e1[_0x431f79(0x7b)]-_0x45f1c3['top'];!(_0x46ef14<_0x1e1c3b||_0x529252>_0x45674c||_0x3f6e34<_0x371b2c||_0x43ae18>_0xd460f1)?_0x3e431b['classList']['add']('hover-by-selection'):_0x3e431b['classList']['remove']('hover-by-selection');});}['toggleIconSelection'](_0x4fee3a,_0x41fcde){const _0x5471af=_0x33c5a3;_0x41fcde?_0x4fee3a[_0x5471af(0xa7)][_0x5471af(0x97)](_0x5471af(0xcc))?(_0x4fee3a[_0x5471af(0xa7)]['remove'](_0x5471af(0xcc)),this[_0x5471af(0x92)][_0x5471af(0xcf)](_0x4fee3a)):(_0x4fee3a['classList'][_0x5471af(0x76)](_0x5471af(0xcc)),this['selectedIcons'][_0x5471af(0x76)](_0x4fee3a)):(this[_0x5471af(0xba)](),_0x4fee3a['classList']['add'](_0x5471af(0xcc)),this['selectedIcons'][_0x5471af(0x76)](_0x4fee3a));}[_0x33c5a3(0x7c)](_0x765910,_0xccc1e3=!0x0){const _0x5fd4e3=_0x33c5a3;_0xccc1e3&&this['clearSelection'](),_0x765910['classList']['add'](_0x5fd4e3(0xcc)),this['selectedIcons'][_0x5fd4e3(0x76)](_0x765910);}['clearSelection'](){const _0x59e5f8=_0x33c5a3;this['getIcons']()[_0x59e5f8(0xcb)](_0xa5c8ed=>{const _0x2d6955=_0x59e5f8;_0xa5c8ed['classList']['remove'](_0x2d6955(0xcc),'hover-by-selection');}),this['selectedIcons'][_0x59e5f8(0x81)]();}[_0x33c5a3(0x94)](){const _0x39d44a=_0x33c5a3;this['getIcons']()[_0x39d44a(0xcb)](_0x694a94=>_0x694a94[_0x39d44a(0xa7)]['remove'](_0x39d44a(0xb6)));}[_0x33c5a3(0xb7)](){const _0x29adc7=_0x33c5a3;this['isDragging']=!0x1,this[_0x29adc7(0xd2)]=!0x1,this['activeDragPointerId']=null,this[_0x29adc7(0xbd)]&&this[_0x29adc7(0xbd)][_0x29adc7(0x7f)]&&(this['selectionBox'][_0x29adc7(0x7f)][_0x29adc7(0xc5)](this[_0x29adc7(0xbd)]),this[_0x29adc7(0xbd)]=null),this[_0x29adc7(0x94)]();}}