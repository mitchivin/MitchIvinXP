const _0x527b9f=_0x21f5;function _0x21f5(_0x1914ca,_0x198e40){const _0x2edc92=_0x2edc();return _0x21f5=function(_0x21f568,_0x3cf5f1){_0x21f568=_0x21f568-0x1e1;let _0x53810f=_0x2edc92[_0x21f568];if(_0x21f5['sEPyDY']===undefined){var _0x40dade=function(_0x21df9f){const _0x2655e5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2df839='',_0x2c9350='';for(let _0x4bae73=0x0,_0x589ebc,_0x3f265a,_0x3ea133=0x0;_0x3f265a=_0x21df9f['charAt'](_0x3ea133++);~_0x3f265a&&(_0x589ebc=_0x4bae73%0x4?_0x589ebc*0x40+_0x3f265a:_0x3f265a,_0x4bae73++%0x4)?_0x2df839+=String['fromCharCode'](0xff&_0x589ebc>>(-0x2*_0x4bae73&0x6)):0x0){_0x3f265a=_0x2655e5['indexOf'](_0x3f265a);}for(let _0x3df989=0x0,_0x133ef3=_0x2df839['length'];_0x3df989<_0x133ef3;_0x3df989++){_0x2c9350+='%'+('00'+_0x2df839['charCodeAt'](_0x3df989)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2c9350);};_0x21f5['VxpMvK']=_0x40dade,_0x1914ca=arguments,_0x21f5['sEPyDY']=!![];}const _0xac427c=_0x2edc92[0x0],_0x366110=_0x21f568+_0xac427c,_0x49315e=_0x1914ca[_0x366110];return!_0x49315e?(_0x53810f=_0x21f5['VxpMvK'](_0x53810f),_0x1914ca[_0x366110]=_0x53810f):_0x53810f=_0x49315e,_0x53810f;},_0x21f5(_0x1914ca,_0x198e40);}(function(_0x418932,_0x3f688a){const _0x2e5433=_0x21f5,_0x432d7b=_0x418932();while(!![]){try{const _0x326957=parseInt(_0x2e5433(0x211))/0x1+parseInt(_0x2e5433(0x21c))/0x2*(-parseInt(_0x2e5433(0x201))/0x3)+parseInt(_0x2e5433(0x1eb))/0x4*(-parseInt(_0x2e5433(0x1f7))/0x5)+parseInt(_0x2e5433(0x224))/0x6+parseInt(_0x2e5433(0x217))/0x7+parseInt(_0x2e5433(0x204))/0x8+-parseInt(_0x2e5433(0x206))/0x9*(parseInt(_0x2e5433(0x239))/0xa);if(_0x326957===_0x3f688a)break;else _0x432d7b['push'](_0x432d7b['shift']());}catch(_0xc4d98){_0x432d7b['push'](_0x432d7b['shift']());}}}(_0x2edc,0x7ae7d));import{EVENTS}from'../utils/eventBus.js';import{isMobileDevice}from'../utils/device.js';let SOCIALS_CACHE=null;async function getSocials(){const _0x26a7ed=_0x21f5;if(SOCIALS_CACHE)return SOCIALS_CACHE;try{const _0x21df9f=await fetch(_0x26a7ed(0x215)),_0x2655e5=await _0x21df9f['json']();return SOCIALS_CACHE=Array['isArray'](_0x2655e5[_0x26a7ed(0x233)])?_0x2655e5['socials']:[],SOCIALS_CACHE;}catch(_0x2df839){return SOCIALS_CACHE=[],SOCIALS_CACHE;}}function _0x2edc(){const _0x2aa718=['ntGXotG2AwPcvu5R','B3bLBG','C2vSzwn0zwq','AxneCMfNz2LUzW','C3rHCNry','y2XHC3noyw1L','CMvTB3zL','y2XHC3nmAxn0','ndeWote4nhDzEer1yG','C2v0Dxbjy29UrxzLBNrZ','zM9YrwfJAa','y2XPy2S','CMvTB3zLq2HPBgq','Dg9Nz2XLswnVBLnLBgvJDgLVBG','lMrLC2T0B3a','zxzLBNrcDxm','Dg9W','y2XPzw50wq','AgfZrhjHz2DLza','D2fSBhbHCgvYlwrLzMf1Bhq','Bwf4vg91y2HqB2LUDhm','y2XLyxjuzw1WB3jHCNLiAwDOBgLNAhrZ','C3vIC2nYAwjL','C29JAwfSCW','BwLU','i3nLBgvJDgLVBI1IB3GSic5ZzwXLy3rPB24TyM94','ChjLCgvUza','zgvSzxrL','D2fSBhbHCgvYlw1VyMLSzq','mJG2nJiWEeHzD0Dx','ufjpr1jbtv9puevo','CMLNAhq','BgfZDenSAwnRvgLTzxm','BgvMDa','ChvIBgLZAa','z2v0swnVBNm','z2v0qM91BMrPBMDdBgLLBNrszwn0','C2vSzwn0Aw9Ulw92zxjSyxK','y3jLyxrLu2vSzwn0Aw9Ut3zLCMXHEq','ywjZ','lMrLC2T0B3aTAwnVBG','DxbKyxrLu29JAwfSrgvZA3rVCeLJB25Z','ywX0','ng9mr3zquG','DgHLBG','CgfYzw50tM9Kzq','C3rHCNrz','Cg9PBNrLCNvW','ywrKrxzLBNrmAxn0zw5LCG','zgL2','Dg9mB3DLCKnHC2u','C2vSzwn0swnVBG','D2fSBhbHCgvYrgvZA3rVCa','CMvKDwnL','C2vSzwn0Aw9UqM94','mta3nJiWmfbAvLzYAG','mhb4','CxvLCNLtzwXLy3rVCKfSBa','Cg9PBNrLCKLK','DxjS','DxjSkcC','y2XPzw50wa','lMrLC2T0B3aTAwnVBLTKyxrHlxbYB2DYyw0TBMfTzt0I','CMvWBgfJzq','B3zLCMXHEq','m0vtvgHiBW','yMfJA2DYB3vUzeLTywDL','y29UDgfPBNm','mZaYodqXnLPjvKffsa','DgfYz2v0','nduWEuvXwu5n','C2v0DxbqB2LUDgvYu2vSzwn0Aw9UrxzLBNrZ','ywn0AxzLrhjHz1bVAw50zxjjza','CxvLCNLtzwXLy3rVCG','C3bHBG','DhLWzq','CMvZzxreCMfNu2vSzwn0Aw9Uu3rHDgu','AwnVBG','ywrK','Cg9PBNrLCMrVD24','B250B3vJAhn0yxj0','otK4ntmXCNDpu21m','Ag92zxiTyNKTC2vSzwn0Aw9U','BMfTzq','y2XLyxjtzwXLy3rPB24','lI9PBMzVlMPZB24','y3jLyxrLrwXLBwvUDa','mJy2nty0owrVC0L1sG','C3r5Bgu','y3rYBeTLEq','C2vSzwn0zwrjy29UCW','zgvZA3rVCa'];_0x2edc=function(){return _0x2aa718;};return _0x2edc();}let SYSTEM_ASSETS=null;async function getSystemAssets(){if(SYSTEM_ASSETS)return SYSTEM_ASSETS;try{const _0x2c9350=await fetch('./system.json');return SYSTEM_ASSETS=await _0x2c9350['json'](),SYSTEM_ASSETS;}catch(_0x4bae73){return SYSTEM_ASSETS={},SYSTEM_ASSETS;}}export default class Desktop{constructor(_0x589ebc){const _0x71a2bb=_0x21f5;this['eventBus']=_0x589ebc,this['desktop']=document['querySelector']('.desktop'),this[_0x71a2bb(0x1f6)]=null,this['isDragging']=!0x1,this['hasDragged']=!0x1,this['startX']=0x0,this[_0x71a2bb(0x1ee)]=0x0,this[_0x71a2bb(0x23c)]={},this['selectedIcons']=new Set(),this[_0x71a2bb(0x208)]=null,this['cleanupArtifacts'](),this[_0x71a2bb(0x1e6)](),getSocials()[_0x71a2bb(0x1ec)](_0x3f265a=>{const _0x54e520=_0x71a2bb;this['socials']=_0x3f265a,this[_0x54e520(0x1e9)](),this[_0x54e520(0x225)]();}),this['setupDesktopEvents'](),this[_0x71a2bb(0x207)](),this['desktop']['classList'][_0x71a2bb(0x222)](_0x71a2bb(0x22f),'wallpaper-mobile'),isMobileDevice()?this['desktop']['classList'][_0x71a2bb(0x20e)](_0x71a2bb(0x238)):this['desktop'][_0x71a2bb(0x223)][_0x71a2bb(0x20e)]('wallpaper-default'),this[_0x71a2bb(0x22b)]['subscribe'](EVENTS['WINDOW_CREATED'],()=>this['clearSelection']()),this[_0x71a2bb(0x22b)][_0x71a2bb(0x232)](EVENTS['WINDOW_FOCUSED'],()=>this[_0x71a2bb(0x214)]()),this[_0x71a2bb(0x22b)][_0x71a2bb(0x232)](EVENTS[_0x71a2bb(0x23a)],()=>this['resetDragSelectionState']()),this[_0x71a2bb(0x22b)]['subscribe'](EVENTS['STARTMENU_OPENED'],()=>this[_0x71a2bb(0x20c)]()),getSystemAssets()[_0x71a2bb(0x1ec)](_0x3ea133=>{const _0x20b485=_0x71a2bb;isMobileDevice()?this[_0x20b485(0x21b)][_0x20b485(0x218)][_0x20b485(0x202)]=_0x20b485(0x1fc)+_0x3ea133['wallpaperMobile']+'\x27)':this[_0x20b485(0x21b)]['style']['backgroundImage']='url(\x27'+_0x3ea133[_0x20b485(0x1f4)]+'\x27)';});}['getIcons'](){const _0x2ed0eb=_0x21f5;return this['desktop'][_0x2ed0eb(0x1f9)](_0x2ed0eb(0x1e8));}['cleanupArtifacts'](){const _0x105032=_0x21f5;document[_0x105032(0x1f9)](_0x105032(0x235))[_0x105032(0x226)](_0x3df989=>_0x3df989['remove']());}['createSelectionOverlay'](){const _0x182582=_0x21f5;this['overlay']||(this['overlay']=document[_0x182582(0x216)](_0x182582(0x1f1)),this['overlay'][_0x182582(0x221)]=_0x182582(0x1e5),this[_0x182582(0x21b)][_0x182582(0x236)](this[_0x182582(0x200)]));}['updateSocialDesktopIcons'](){const _0x16988c=_0x21f5;this['socials']&&this['socials'][_0x16988c(0x226)](_0x133ef3=>{const _0x41ef2d=_0x16988c,_0x1b5078=this['desktop'][_0x41ef2d(0x209)](_0x41ef2d(0x1fe)+_0x133ef3['key']+'\x22]\x20img');if(_0x1b5078&&_0x133ef3[_0x41ef2d(0x20d)]){const _0x4367fc='./'+_0x133ef3[_0x41ef2d(0x20d)][_0x41ef2d(0x1ff)](/^\.\//,'')[_0x41ef2d(0x1ff)](/^\//,'');_0x1b5078['src']=_0x4367fc,_0x1b5078[_0x41ef2d(0x1ea)]=_0x133ef3[_0x41ef2d(0x213)];}});}['setupIconEvents'](){const _0xd2d7d5=_0x21f5,_0x47225a=_0xd2d7d5(0x210)in window||navigator[_0xd2d7d5(0x230)]>0x0,_0xf755aa=(this[_0xd2d7d5(0x233)]||[])[_0xd2d7d5(0x1f5)]((_0x4c2402,_0x4518de)=>(_0x4c2402[_0x4518de['key']]=_0x4518de,_0x4c2402),{});this[_0xd2d7d5(0x1e3)]()['forEach'](_0x1f427a=>{const _0xf11151=_0xd2d7d5;if('A'===_0x1f427a['tagName'])return;const _0x68a53e=_0x1f427a[_0xf11151(0x209)](_0xf11151(0x20a)),_0x337ad0=_0x68a53e?_0x68a53e['textContent']['trim']()[_0xf11151(0x1f2)]()[_0xf11151(0x1ff)](/\s+/g,'-'):'',_0x48213e=_0x28ccb2=>{const _0x546ad1=_0xf11151;if(_0x28ccb2['stopPropagation'](),_0x47225a&&_0x546ad1(0x227)===_0x28ccb2[_0x546ad1(0x20b)])return;const _0x1fc145=Date['now']();if(_0x1fc145-(this[_0x546ad1(0x23c)][_0x337ad0]||0x0)<0x190){_0x1f427a['classList']['contains'](_0x546ad1(0x21e))||this[_0x546ad1(0x1f3)](_0x1f427a,!0x0);let _0x9dad78=_0x1f427a['getAttribute']('data-program-name');_0xf755aa[_0x9dad78]?window[_0x546ad1(0x21d)](_0xf755aa[_0x9dad78][_0x546ad1(0x1fb)],'_blank'):this['eventBus'][_0x546ad1(0x1e2)](EVENTS['PROGRAM_OPEN'],{'programName':_0x9dad78}),this[_0x546ad1(0x23c)][_0x337ad0]=0x0;}else this[_0x546ad1(0x229)](_0x1f427a,_0x28ccb2[_0x546ad1(0x219)]),this['lastClickTimes'][_0x337ad0]=_0x1fc145;};_0x47225a?_0x1f427a[_0xf11151(0x1f0)]('touchend',_0x48213e):_0x1f427a['addEventListener']('click',_0x48213e);});}['setupDesktopEvents'](){const _0x6f1390=_0x21f5;this['desktop']['addEventListener'](_0x6f1390(0x227),_0x3f9289=>{const _0x35767f=_0x6f1390;_0x3f9289[_0x35767f(0x205)]!==this['desktop']&&_0x3f9289[_0x35767f(0x205)]!==this['overlay']||this['isDragging']||this[_0x35767f(0x22e)]||this[_0x35767f(0x214)]();});}[_0x527b9f(0x207)](){const _0x259e66=_0x527b9f;window[_0x259e66(0x1f0)](_0x259e66(0x20f),_0x2557a1=>{const _0x2cc89f=_0x259e66;if(_0x2557a1[_0x2cc89f(0x205)]!==this[_0x2cc89f(0x200)]&&_0x2557a1[_0x2cc89f(0x205)]!==this['desktop'])return;if(isMobileDevice()&&(null!==this[_0x2cc89f(0x208)]&&this['activeDragPointerId']!==_0x2557a1['pointerId']||this['isDragging']&&this[_0x2cc89f(0x208)]===_0x2557a1['pointerId'])&&this['resetDragSelectionState'](),this['isDragging'])return;_0x2557a1[_0x2cc89f(0x219)]||this[_0x2cc89f(0x214)]();const _0xb0209e=this['desktop']['getBoundingClientRect']();this[_0x2cc89f(0x220)]=_0x2557a1[_0x2cc89f(0x1fd)]-_0xb0209e['left'],this[_0x2cc89f(0x1ee)]=_0x2557a1[_0x2cc89f(0x22d)]-_0xb0209e[_0x2cc89f(0x22c)],this['clearTemporaryHighlights'](),this[_0x2cc89f(0x1f6)]=document[_0x2cc89f(0x216)]('div'),this['selectionBox'][_0x2cc89f(0x221)]='selection-box',Object['assign'](this[_0x2cc89f(0x1f6)][_0x2cc89f(0x218)],{'left':this['startX']+'px','top':this['startY']+'px','width':_0x2cc89f(0x1f8),'height':'0px'}),this[_0x2cc89f(0x21b)]['appendChild'](this['selectionBox']),this['isDragging']=!0x0,this['hasDragged']=!0x1,this['activeDragPointerId']=_0x2557a1['pointerId'];}),window[_0x259e66(0x1f0)]('pointermove',_0x4aac0e=>{const _0xcd65d5=_0x259e66;if(!this[_0xcd65d5(0x21f)]||!this['selectionBox'])return;if(isMobileDevice()&&_0x4aac0e['pointerId']!==this[_0xcd65d5(0x208)])return;this[_0xcd65d5(0x22e)]=!0x0;const _0x5ee43e=this[_0xcd65d5(0x21b)][_0xcd65d5(0x1e4)](),_0x335657=_0x4aac0e[_0xcd65d5(0x1fd)]-_0x5ee43e['left'],_0x26fa8e=_0x4aac0e['clientY']-_0x5ee43e['top'],_0x1d6721=Math[_0xcd65d5(0x234)](_0x335657,this[_0xcd65d5(0x220)]),_0x501987=Math['min'](_0x26fa8e,this['startY']),_0x1361ea=Math[_0xcd65d5(0x1e7)](_0x335657-this[_0xcd65d5(0x220)]),_0x25b287=Math['abs'](_0x26fa8e-this['startY']);Object['assign'](this['selectionBox'][_0xcd65d5(0x218)],{'left':_0x1d6721+'px','top':_0x501987+'px','width':_0x1361ea+'px','height':_0x25b287+'px'}),this['highlightIconsIntersecting'](_0x1d6721,_0x501987,_0x1361ea,_0x25b287);}),window[_0x259e66(0x1f0)](_0x259e66(0x1ef),_0x1512cb=>{const _0xadf9e6=_0x259e66;this[_0xadf9e6(0x21f)]&&this['selectionBox']&&(isMobileDevice()&&_0x1512cb[_0xadf9e6(0x1fa)]!==this[_0xadf9e6(0x208)]||(this[_0xadf9e6(0x21f)]=!0x1,this['getIcons']()[_0xadf9e6(0x226)](_0x4497d9=>{const _0x576246=_0xadf9e6;_0x4497d9['classList'][_0x576246(0x203)](_0x576246(0x212))&&(_0x4497d9['classList'][_0x576246(0x222)]('hover-by-selection'),_0x4497d9[_0x576246(0x223)]['add'](_0x576246(0x21e)),this['selectedIcons']['add'](_0x4497d9));}),this['selectionBox']?.['parentNode']&&(this[_0xadf9e6(0x1f6)][_0xadf9e6(0x1ed)][_0xadf9e6(0x228)](this[_0xadf9e6(0x1f6)]),this['selectionBox']=null),this['activeDragPointerId']=null));});}['highlightIconsIntersecting'](_0x3f4f89,_0x34f94c,_0x3ed709,_0xf8af16){const _0x9ba590=_0x527b9f,_0x17afe1=_0x3f4f89,_0x298ee8=_0x34f94c,_0xcf5129=_0x3f4f89+_0x3ed709,_0x5bb7de=_0x34f94c+_0xf8af16;this['getIcons']()[_0x9ba590(0x226)](_0x401176=>{const _0x2d8e2f=_0x9ba590,_0x28270d=_0x401176['getBoundingClientRect'](),_0x3d5764=this['desktop'][_0x2d8e2f(0x1e4)](),_0x277e78=_0x28270d[_0x2d8e2f(0x1e1)]-_0x3d5764[_0x2d8e2f(0x1e1)],_0x37d468=_0x28270d[_0x2d8e2f(0x22c)]-_0x3d5764[_0x2d8e2f(0x22c)],_0x44523a=_0x28270d[_0x2d8e2f(0x23b)]-_0x3d5764[_0x2d8e2f(0x1e1)],_0x556aa6=_0x28270d['bottom']-_0x3d5764['top'];!(_0x44523a<_0x17afe1||_0x277e78>_0xcf5129||_0x556aa6<_0x298ee8||_0x37d468>_0x5bb7de)?_0x401176[_0x2d8e2f(0x223)][_0x2d8e2f(0x20e)](_0x2d8e2f(0x212)):_0x401176[_0x2d8e2f(0x223)][_0x2d8e2f(0x222)]('hover-by-selection');});}['toggleIconSelection'](_0x5a2dee,_0x2e6a83){const _0x1495db=_0x527b9f;_0x2e6a83?_0x5a2dee[_0x1495db(0x223)]['contains']('selected')?(_0x5a2dee[_0x1495db(0x223)][_0x1495db(0x222)](_0x1495db(0x21e)),this[_0x1495db(0x21a)][_0x1495db(0x237)](_0x5a2dee)):(_0x5a2dee[_0x1495db(0x223)]['add'](_0x1495db(0x21e)),this['selectedIcons']['add'](_0x5a2dee)):(this['clearSelection'](),_0x5a2dee['classList'][_0x1495db(0x20e)]('selected'),this['selectedIcons']['add'](_0x5a2dee));}['selectIcon'](_0x24164b,_0x4b66cc=!0x0){const _0x41bf3b=_0x527b9f;_0x4b66cc&&this[_0x41bf3b(0x214)](),_0x24164b[_0x41bf3b(0x223)][_0x41bf3b(0x20e)](_0x41bf3b(0x21e)),this[_0x41bf3b(0x21a)]['add'](_0x24164b);}['clearSelection'](){const _0x3dc9da=_0x527b9f;this['getIcons']()[_0x3dc9da(0x226)](_0x4028d1=>{const _0x4739f8=_0x3dc9da;_0x4028d1[_0x4739f8(0x223)][_0x4739f8(0x222)](_0x4739f8(0x21e),_0x4739f8(0x212));}),this[_0x3dc9da(0x21a)]['clear']();}[_0x527b9f(0x231)](){const _0x4463f1=_0x527b9f;this['getIcons']()['forEach'](_0x52f211=>_0x52f211[_0x4463f1(0x223)][_0x4463f1(0x222)]('hover-by-selection'));}[_0x527b9f(0x20c)](){const _0x5ecbb6=_0x527b9f;this['isDragging']=!0x1,this['hasDragged']=!0x1,this['activeDragPointerId']=null,this['selectionBox']&&this[_0x5ecbb6(0x1f6)]['parentNode']&&(this[_0x5ecbb6(0x1f6)][_0x5ecbb6(0x1ed)][_0x5ecbb6(0x228)](this[_0x5ecbb6(0x1f6)]),this[_0x5ecbb6(0x1f6)]=null),this['clearTemporaryHighlights']();}}document[_0x527b9f(0x1f0)]('DOMContentLoaded',async()=>{const _0x425644=_0x527b9f,_0x558e1a=document[_0x425644(0x209)](_0x425644(0x22a));if(!_0x558e1a)return;const _0x3905ec=await getSystemAssets();isMobileDevice()?_0x558e1a['style'][_0x425644(0x202)]='url(\x27'+_0x3905ec['wallpaperMobile']+'\x27)':_0x558e1a['style'][_0x425644(0x202)]=_0x425644(0x1fc)+_0x3905ec[_0x425644(0x1f4)]+'\x27)';});