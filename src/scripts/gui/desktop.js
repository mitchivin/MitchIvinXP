const _0x3c6428=_0x4c76;function _0x4c76(_0x2c9f7c,_0x4fb264){const _0x3aabfb=_0x3aab();return _0x4c76=function(_0x4c767e,_0x5f2c63){_0x4c767e=_0x4c767e-0x165;let _0x1035d7=_0x3aabfb[_0x4c767e];if(_0x4c76['IGmPIE']===undefined){var _0x191381=function(_0x40fb50){const _0x5552ed='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x53f601='',_0x38acd0='';for(let _0x54fd5=0x0,_0x183d54,_0x2e8c30,_0x3f423c=0x0;_0x2e8c30=_0x40fb50['charAt'](_0x3f423c++);~_0x2e8c30&&(_0x183d54=_0x54fd5%0x4?_0x183d54*0x40+_0x2e8c30:_0x2e8c30,_0x54fd5++%0x4)?_0x53f601+=String['fromCharCode'](0xff&_0x183d54>>(-0x2*_0x54fd5&0x6)):0x0){_0x2e8c30=_0x5552ed['indexOf'](_0x2e8c30);}for(let _0x142f2f=0x0,_0x1837be=_0x53f601['length'];_0x142f2f<_0x1837be;_0x142f2f++){_0x38acd0+='%'+('00'+_0x53f601['charCodeAt'](_0x142f2f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x38acd0);};_0x4c76['xYtdgp']=_0x191381,_0x2c9f7c=arguments,_0x4c76['IGmPIE']=!![];}const _0xe10313=_0x3aabfb[0x0],_0xf40bf2=_0x4c767e+_0xe10313,_0xcccc1e=_0x2c9f7c[_0xf40bf2];return!_0xcccc1e?(_0x1035d7=_0x4c76['xYtdgp'](_0x1035d7),_0x2c9f7c[_0xf40bf2]=_0x1035d7):_0x1035d7=_0xcccc1e,_0x1035d7;},_0x4c76(_0x2c9f7c,_0x4fb264);}(function(_0x36fe58,_0x4e0df4){const _0x49d659=_0x4c76,_0x94faf3=_0x36fe58();while(!![]){try{const _0x291cd8=-parseInt(_0x49d659(0x1a8))/0x1+-parseInt(_0x49d659(0x170))/0x2*(parseInt(_0x49d659(0x187))/0x3)+parseInt(_0x49d659(0x17c))/0x4+parseInt(_0x49d659(0x1ab))/0x5*(parseInt(_0x49d659(0x174))/0x6)+parseInt(_0x49d659(0x1ae))/0x7*(-parseInt(_0x49d659(0x178))/0x8)+-parseInt(_0x49d659(0x176))/0x9+parseInt(_0x49d659(0x1a2))/0xa;if(_0x291cd8===_0x4e0df4)break;else _0x94faf3['push'](_0x94faf3['shift']());}catch(_0x87eac4){_0x94faf3['push'](_0x94faf3['shift']());}}}(_0x3aab,0xe9c1b));import{EVENTS}from'../utils/eventBus.js';function _0x3aab(){const _0x4ea037=['z2v0qM91BMrPBMDdBgLLBNrszwn0','DhjPBq','y2XHC3noyw1L','y2XLyw51CefYDgLMywn0CW','CMvKDwnL','CMvTB3zLq2HPBgq','C3r5Bgu','yMfJA2DYB3vUzeLTywDL','y2XLyxi','Dg9mB3DLCKnHC2u','C2vSzwn0swnVBG','ufjpr1jbtv9puevo','y2XHC3nmAxn0','ywrK','ndaYzLvsDLrO','D2fSBhbHCgvYrgvZA3rVCa','lMrLC2T0B3a','D2fSBhbHCgvYtw9IAwXL','mtm4wwLKuKXo','rMfPBgvKihrVigzLDgnOihn5C3rLBs5QC29UoG','nZy1nZu3ogH5BgL6Cq','z2v0swnVBNm','mJqZntGYneD2DNbvDG','ChjLCgvUza','x2jSyw5R','C3rHCNry','ndu5mdi0oe5ZuNzwwG','iL0GAw1N','Dg91y2HLBMq','Ag92zxiTyNKTC2vSzwn0Aw9U','yxnZAwDU','Bwf4vg91y2HqB2LUDhm','y3jLyxrLrwXLBwvUDa','BwLU','A2v5','zgL2','AwnVBG','mJaYodnQwvnivMu','CxvLCNLtzwXLy3rVCG','C3jJ','BMfTzq','CMvWBgfJzq','y2XPy2S','Dg9W','AgfZrhjHz2DLza','C3rVCfbYB3bHz2f0Aw9U','C2vSzwn0Aw9UqM94','C29JAwfSCW','AxneCMfNz2LUzW','DxbKyxrLu29JAwfSrgvZA3rVCeLJB25Z','y2XLyxjuzw1WB3jHCNLiAwDOBgLNAhrZ','C2v0DxbezxnRDg9WrxzLBNrZ','ANnVBG','C2v0DxbqB2LUDgvYu2vSzwn0Aw9UrxzLBNrZ','Dgv4DenVBNrLBNq','DgHLBG','C3vIC2nYAwjL','B3bLBG','y2XPzw50wq','y3rYBeTLEq','zxzLBNrcDxm','ywjZ','DgfYz2v0','rMfPBgvKihrVigzLDgnOig9YihbHCNnLihnVy2LHBhmGzNjVBsbPBMzVlMPZB246','ndiZotGWndblvLDPvu4','zgf0ys1WCM9NCMfTlw5HBwu','CMvZzxreCMfNu2vSzwn0Aw9Uu3rHDgu','C2vSzwn0zwq','C2vSzwn0zwrjy29UCW','ywrKrxzLBNrmAxn0zw5LCG','mty4odKXofjOugPYEG','y29UDgfPBNm','zgvZA3rVCa','mtq5mJKWzKHtr2fA','AxnbCNjHEq','Cg9PBNrLCKLK','mJHxEe5gBNu','C3rHCNrz','D2fSBhbHCgvYlw1VyMLSzq','ywn0AxzLrhjHz1bVAw50zxjjza','B3zLCMXHEq','DxjSkcC','AgLNAgXPz2H0swnVBNnjBNrLCNnLy3rPBMC','CMvTB3zL','BgvMDa','zxjYB3i','CgfYzw50tM9Kzq','Dg9Nz2XLswnVBLnLBgvJDgLVBG','zM9YrwfJAa','lMrLC2T0B3aTAwnVBLTKyxrHlxbYB2DYyw0TBMfTzt0I','y2XLyxjtzwXLy3rPB24'];_0x3aab=function(){return _0x4ea037;};return _0x3aab();}import{isMobileDevice}from'../utils/device.js';let SOCIALS_CACHE=null;async function getSocials(){const _0x45a20e=_0x4c76;if(SOCIALS_CACHE)return SOCIALS_CACHE;try{const _0x40fb50=await fetch('./info.json'),_0x5552ed=await _0x40fb50['json']();return SOCIALS_CACHE=Array[_0x45a20e(0x1ac)](_0x5552ed[_0x45a20e(0x191)])?_0x5552ed[_0x45a20e(0x191)]:[],SOCIALS_CACHE;}catch(_0x53f601){return console['error'](_0x45a20e(0x1a1),_0x53f601),SOCIALS_CACHE=[],SOCIALS_CACHE;}}let SYSTEM_ASSETS=null;async function getSystemAssets(){const _0x23b86e=_0x4c76;if(SYSTEM_ASSETS)return SYSTEM_ASSETS;try{const _0x38acd0=await fetch('./system.json');return SYSTEM_ASSETS=await _0x38acd0[_0x23b86e(0x196)](),SYSTEM_ASSETS;}catch(_0x54fd5){return console[_0x23b86e(0x1b7)](_0x23b86e(0x175),_0x54fd5),SYSTEM_ASSETS={},SYSTEM_ASSETS;}}export default class Desktop{constructor(_0x183d54){const _0x3c8ea8=_0x4c76;this['eventBus']=_0x183d54,this['desktop']=document[_0x3c8ea8(0x188)](_0x3c8ea8(0x172)),this['selectionBox']=null,this['isDragging']=!0x1,this[_0x3c8ea8(0x18e)]=!0x1,this[_0x3c8ea8(0x17b)]=0x0,this[_0x3c8ea8(0x1af)]=0x0,this['lastClickTimes']={},this[_0x3c8ea8(0x1a6)]=new Set(),this[_0x3c8ea8(0x1b1)]=null,this[_0x3c8ea8(0x165)](),this['createSelectionOverlay'](),getSocials()[_0x3c8ea8(0x199)](_0x2e8c30=>{const _0xf311ca=_0x3c8ea8;this['socials']=_0x2e8c30,this[_0xf311ca(0x193)](),this['setupIconEvents']();}),this[_0x3c8ea8(0x195)](),this[_0x3c8ea8(0x197)](),this['desktop']['classList'][_0x3c8ea8(0x1b5)]('wallpaper-default',_0x3c8ea8(0x1b0)),isMobileDevice()?this[_0x3c8ea8(0x1aa)]['classList'][_0x3c8ea8(0x16f)](_0x3c8ea8(0x1b0)):this['desktop'][_0x3c8ea8(0x16e)]['add']('wallpaper-default'),this['eventBus'][_0x3c8ea8(0x19a)](EVENTS['WINDOW_CREATED'],()=>this['clearSelection']()),this['eventBus'][_0x3c8ea8(0x19a)](EVENTS['WINDOW_FOCUSED'],()=>this[_0x3c8ea8(0x1bc)]()),this['eventBus']['subscribe'](EVENTS[_0x3c8ea8(0x16d)],()=>this['resetDragSelectionState']()),this[_0x3c8ea8(0x19e)]['subscribe'](EVENTS['STARTMENU_OPENED'],()=>this['resetDragSelectionState']()),getSystemAssets()[_0x3c8ea8(0x199)](_0x3f423c=>{const _0x1f10e7=_0x3c8ea8;isMobileDevice()&&_0x3f423c['wallpaperMobile']?this['desktop']['style']['backgroundImage']=_0x1f10e7(0x1b3)+_0x3f423c[_0x1f10e7(0x173)]+'\x27)':_0x3f423c[_0x1f10e7(0x171)]&&(this['desktop']['style'][_0x1f10e7(0x169)]='url(\x27'+_0x3f423c[_0x1f10e7(0x171)]+'\x27)');});}['getIcons'](){const _0x4a0ec5=_0x4c76;return this[_0x4a0ec5(0x1aa)]['querySelectorAll']('.desktop-icon');}[_0x3c6428(0x165)](){const _0x258b2a=_0x3c6428;document['querySelectorAll']('#selection-box,\x20.selection-box')[_0x258b2a(0x1ba)](_0x142f2f=>_0x142f2f['remove']());}['createSelectionOverlay'](){const _0x42f845=_0x3c6428;this['overlay']||(this['overlay']=document['createElement'](_0x42f845(0x185)),this[_0x42f845(0x1b2)][_0x42f845(0x1bf)]='selection-overlay',this['desktop'][_0x42f845(0x179)](this[_0x42f845(0x1b2)]));}[_0x3c6428(0x193)](){const _0x27ad0f=_0x3c6428;this[_0x27ad0f(0x191)]&&this[_0x27ad0f(0x191)][_0x27ad0f(0x1ba)](_0x1837be=>{const _0x10307b=_0x27ad0f,_0x25b623=this[_0x10307b(0x1aa)][_0x10307b(0x188)](_0x10307b(0x1bb)+_0x1837be['key']+_0x10307b(0x17d));if(_0x25b623&&_0x1837be[_0x10307b(0x186)]){const _0x3aa4dd='./'+_0x1837be[_0x10307b(0x186)]['replace'](/^\.\//,'')[_0x10307b(0x18b)](/^\//,'');_0x25b623[_0x10307b(0x189)]=_0x3aa4dd,_0x25b623['alt']=_0x1837be[_0x10307b(0x18a)];}});}['setupIconEvents'](){const _0x2b316a=_0x3c6428,_0x175d3f='ontouchstart'in window||navigator[_0x2b316a(0x181)]>0x0,_0x2048e3=(this[_0x2b316a(0x191)]||[])[_0x2b316a(0x166)]((_0x3f6b7a,_0x4de8f1)=>(_0x3f6b7a[_0x4de8f1[_0x2b316a(0x184)]]=_0x4de8f1,_0x3f6b7a),{});this[_0x2b316a(0x177)]()[_0x2b316a(0x1ba)](_0x1053c0=>{const _0x503ef3=_0x2b316a;if('A'===_0x1053c0['tagName'])return;const _0x1a4438=_0x1053c0[_0x503ef3(0x188)]('span'),_0x20f2d5=_0x1a4438?_0x1a4438[_0x503ef3(0x198)][_0x503ef3(0x1be)]()[_0x503ef3(0x16b)]()[_0x503ef3(0x18b)](/\s+/g,'-'):'',_0x5d277f=_0x1cbbca=>{const _0x43db04=_0x503ef3;if(_0x1cbbca[_0x43db04(0x18f)](),_0x175d3f&&'click'===_0x1cbbca['type'])return;const _0x237ad9=Date['now']();if(_0x237ad9-(this['lastClickTimes'][_0x20f2d5]||0x0)<0x190){_0x1053c0['classList']['contains']('selected')||this[_0x43db04(0x16c)](_0x1053c0,!0x0);let _0x3d0500=_0x1053c0['getAttribute'](_0x43db04(0x1a3));_0x2048e3[_0x3d0500]?window[_0x43db04(0x19b)](_0x2048e3[_0x3d0500]['url'],_0x43db04(0x17a)):this['eventBus']['publish'](EVENTS['PROGRAM_OPEN'],{'programName':_0x3d0500}),this['lastClickTimes'][_0x20f2d5]=0x0;}else this[_0x43db04(0x1b9)](_0x1053c0,_0x1cbbca[_0x43db04(0x19d)]),this['lastClickTimes'][_0x20f2d5]=_0x237ad9;};_0x175d3f?_0x1053c0['addEventListener'](_0x503ef3(0x17e),_0x5d277f):_0x1053c0[_0x503ef3(0x1a7)]('click',_0x5d277f);});}['setupDesktopEvents'](){const _0x1bbdcc=_0x3c6428;this['desktop']['addEventListener'](_0x1bbdcc(0x18c),_0x1f8f1e=>{const _0x3a22dd=_0x1bbdcc;_0x1f8f1e['target']!==this['desktop']&&_0x1f8f1e['target']!==this[_0x3a22dd(0x1b2)]||this[_0x3a22dd(0x192)]||this[_0x3a22dd(0x18e)]||this[_0x3a22dd(0x1bc)]();});}[_0x3c6428(0x197)](){const _0x412c01=_0x3c6428;window[_0x412c01(0x1a7)]('pointerdown',_0x208679=>{const _0x5b67c5=_0x412c01;if(_0x208679[_0x5b67c5(0x1a0)]!==this[_0x5b67c5(0x1b2)]&&_0x208679['target']!==this[_0x5b67c5(0x1aa)])return;if(isMobileDevice()&&(null!==this[_0x5b67c5(0x1b1)]&&this[_0x5b67c5(0x1b1)]!==_0x208679[_0x5b67c5(0x1ad)]||this[_0x5b67c5(0x192)]&&this['activeDragPointerId']===_0x208679['pointerId'])&&this[_0x5b67c5(0x1a4)](),this[_0x5b67c5(0x192)])return;_0x208679['ctrlKey']||this['clearSelection']();const _0x33f28a=this[_0x5b67c5(0x1aa)][_0x5b67c5(0x1bd)]();this['startX']=_0x208679['clientX']-_0x33f28a[_0x5b67c5(0x1b6)],this['startY']=_0x208679[_0x5b67c5(0x19c)]-_0x33f28a['top'],this[_0x5b67c5(0x194)](),this['selectionBox']=document[_0x5b67c5(0x182)]('div'),this[_0x5b67c5(0x190)][_0x5b67c5(0x1bf)]='selection-box',Object[_0x5b67c5(0x180)](this[_0x5b67c5(0x190)][_0x5b67c5(0x168)],{'left':this[_0x5b67c5(0x17b)]+'px','top':this['startY']+'px','width':'0px','height':'0px'}),this['desktop']['appendChild'](this[_0x5b67c5(0x190)]),this['isDragging']=!0x0,this['hasDragged']=!0x1,this['activeDragPointerId']=_0x208679['pointerId'];}),window[_0x412c01(0x1a7)]('pointermove',_0x5b3f80=>{const _0x342eef=_0x412c01;if(!this['isDragging']||!this[_0x342eef(0x190)])return;if(isMobileDevice()&&_0x5b3f80[_0x342eef(0x1ad)]!==this[_0x342eef(0x1b1)])return;this['hasDragged']=!0x0;const _0x419bd0=this[_0x342eef(0x1aa)][_0x342eef(0x1bd)](),_0x34a96c=_0x5b3f80['clientX']-_0x419bd0['left'],_0xab5a3=_0x5b3f80['clientY']-_0x419bd0[_0x342eef(0x18d)],_0x238378=Math[_0x342eef(0x183)](_0x34a96c,this['startX']),_0x334212=Math['min'](_0xab5a3,this['startY']),_0x3f7054=Math['abs'](_0x34a96c-this['startX']),_0x4c42fe=Math[_0x342eef(0x19f)](_0xab5a3-this['startY']);Object[_0x342eef(0x180)](this[_0x342eef(0x190)]['style'],{'left':_0x238378+'px','top':_0x334212+'px','width':_0x3f7054+'px','height':_0x4c42fe+'px'}),this[_0x342eef(0x1b4)](_0x238378,_0x334212,_0x3f7054,_0x4c42fe);}),window[_0x412c01(0x1a7)]('pointerup',_0x1726e7=>{const _0x42af5d=_0x412c01;this['isDragging']&&this[_0x42af5d(0x190)]&&(isMobileDevice()&&_0x1726e7[_0x42af5d(0x1ad)]!==this[_0x42af5d(0x1b1)]||(this[_0x42af5d(0x192)]=!0x1,this[_0x42af5d(0x177)]()['forEach'](_0x157b9a=>{const _0x4f830f=_0x42af5d;_0x157b9a['classList'][_0x4f830f(0x1a9)]('hover-by-selection')&&(_0x157b9a['classList']['remove'](_0x4f830f(0x17f)),_0x157b9a['classList']['add']('selected'),this['selectedIcons']['add'](_0x157b9a));}),this[_0x42af5d(0x190)]?.[_0x42af5d(0x1b8)]&&(this[_0x42af5d(0x190)]['parentNode']['removeChild'](this[_0x42af5d(0x190)]),this['selectionBox']=null),this[_0x42af5d(0x1b1)]=null));});}['highlightIconsIntersecting'](_0x3f4bd1,_0x498922,_0x47c312,_0x256050){const _0x572af8=_0x3c6428,_0x1bcd1e=_0x3f4bd1,_0x326f8e=_0x498922,_0x213771=_0x3f4bd1+_0x47c312,_0x26f982=_0x498922+_0x256050;this['getIcons']()[_0x572af8(0x1ba)](_0x1a286d=>{const _0x1d7455=_0x572af8,_0x4ffbf6=_0x1a286d[_0x1d7455(0x1bd)](),_0x33f70c=this['desktop']['getBoundingClientRect'](),_0x5c63f2=_0x4ffbf6['left']-_0x33f70c['left'],_0x38855c=_0x4ffbf6['top']-_0x33f70c['top'],_0x52a83f=_0x4ffbf6['right']-_0x33f70c['left'],_0x804717=_0x4ffbf6['bottom']-_0x33f70c[_0x1d7455(0x18d)];!(_0x52a83f<_0x1bcd1e||_0x5c63f2>_0x213771||_0x804717<_0x326f8e||_0x38855c>_0x26f982)?_0x1a286d[_0x1d7455(0x16e)][_0x1d7455(0x16f)]('hover-by-selection'):_0x1a286d['classList'][_0x1d7455(0x1b5)]('hover-by-selection');});}['toggleIconSelection'](_0x52506c,_0x140e3f){const _0x310c6f=_0x3c6428;_0x140e3f?_0x52506c['classList']['contains']('selected')?(_0x52506c[_0x310c6f(0x16e)]['remove']('selected'),this[_0x310c6f(0x1a6)]['delete'](_0x52506c)):(_0x52506c[_0x310c6f(0x16e)]['add']('selected'),this[_0x310c6f(0x1a6)][_0x310c6f(0x16f)](_0x52506c)):(this['clearSelection'](),_0x52506c[_0x310c6f(0x16e)][_0x310c6f(0x16f)]('selected'),this[_0x310c6f(0x1a6)][_0x310c6f(0x16f)](_0x52506c));}['selectIcon'](_0x380edf,_0x1dcbf3=!0x0){const _0x46e6e4=_0x3c6428;_0x1dcbf3&&this[_0x46e6e4(0x1bc)](),_0x380edf['classList']['add'](_0x46e6e4(0x1a5)),this['selectedIcons']['add'](_0x380edf);}['clearSelection'](){const _0x8fd5c5=_0x3c6428;this['getIcons']()[_0x8fd5c5(0x1ba)](_0x37e2ba=>{const _0x3f9398=_0x8fd5c5;_0x37e2ba['classList']['remove']('selected',_0x3f9398(0x17f));}),this[_0x8fd5c5(0x1a6)][_0x8fd5c5(0x16a)]();}['clearTemporaryHighlights'](){const _0x5ef53f=_0x3c6428;this[_0x5ef53f(0x177)]()[_0x5ef53f(0x1ba)](_0x1abc91=>_0x1abc91['classList']['remove']('hover-by-selection'));}['resetDragSelectionState'](){const _0x5722f5=_0x3c6428;this['isDragging']=!0x1,this['hasDragged']=!0x1,this['activeDragPointerId']=null,this[_0x5722f5(0x190)]&&this['selectionBox'][_0x5722f5(0x1b8)]&&(this['selectionBox']['parentNode'][_0x5722f5(0x167)](this['selectionBox']),this['selectionBox']=null),this['clearTemporaryHighlights']();}}