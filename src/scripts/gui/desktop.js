const _0x14a39a=_0x473f;function _0x473f(_0x274315,_0x110bcb){const _0x3cb935=_0x3cb9();return _0x473f=function(_0x473fd8,_0x1518d2){_0x473fd8=_0x473fd8-0x9d;let _0x4beb36=_0x3cb935[_0x473fd8];if(_0x473f['ewpmnf']===undefined){var _0x2743dc=function(_0x196063){const _0x11eaec='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x10eabc='',_0x90734='';for(let _0x226c88=0x0,_0xde732c,_0x5dae79,_0x54b464=0x0;_0x5dae79=_0x196063['charAt'](_0x54b464++);~_0x5dae79&&(_0xde732c=_0x226c88%0x4?_0xde732c*0x40+_0x5dae79:_0x5dae79,_0x226c88++%0x4)?_0x10eabc+=String['fromCharCode'](0xff&_0xde732c>>(-0x2*_0x226c88&0x6)):0x0){_0x5dae79=_0x11eaec['indexOf'](_0x5dae79);}for(let _0xa63a0b=0x0,_0x1946a3=_0x10eabc['length'];_0xa63a0b<_0x1946a3;_0xa63a0b++){_0x90734+='%'+('00'+_0x10eabc['charCodeAt'](_0xa63a0b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x90734);};_0x473f['vbizLx']=_0x2743dc,_0x274315=arguments,_0x473f['ewpmnf']=!![];}const _0x11e60=_0x3cb935[0x0],_0x23ca1f=_0x473fd8+_0x11e60,_0xa4a158=_0x274315[_0x23ca1f];return!_0xa4a158?(_0x4beb36=_0x473f['vbizLx'](_0x4beb36),_0x274315[_0x23ca1f]=_0x4beb36):_0x4beb36=_0xa4a158,_0x4beb36;},_0x473f(_0x274315,_0x110bcb);}(function(_0x1c5057,_0x4425ff){const _0x5c45dc=_0x473f,_0x34a95a=_0x1c5057();while(!![]){try{const _0x38fa4e=-parseInt(_0x5c45dc(0xb6))/0x1+-parseInt(_0x5c45dc(0xc5))/0x2+-parseInt(_0x5c45dc(0xf9))/0x3+-parseInt(_0x5c45dc(0xb8))/0x4+parseInt(_0x5c45dc(0xb0))/0x5*(parseInt(_0x5c45dc(0xf2))/0x6)+parseInt(_0x5c45dc(0xbb))/0x7*(parseInt(_0x5c45dc(0xb3))/0x8)+-parseInt(_0x5c45dc(0xd8))/0x9*(-parseInt(_0x5c45dc(0xdf))/0xa);if(_0x38fa4e===_0x4425ff)break;else _0x34a95a['push'](_0x34a95a['shift']());}catch(_0x1302d0){_0x34a95a['push'](_0x34a95a['shift']());}}}(_0x3cb9,0x924d2));function _0x3cb9(){const _0x5d60cc=['ywn0AxzLrhjHz1bVAw50zxjjza','Dg91y2HLBMq','D2fSBhbHCgvYlw1VyMLSzq','zxzLBNrcDxm','lI9ZExn0zw0UANnVBG','AxnbCNjHEq','AgfZrhjHz2DLza','C2vSzwn0swnVBG','C29JAwfSCW','odK3mdyWshvfEMHY','C2vSzwn0Aw9UqM94','Dg9W','mZi1nZK5mNrjwLjKsq','zgL2','CgfYzw50tM9Kzq','ndmWmZe0r3HZrerg','Cg9PBNrLCNvW','mJC1mJeYmgPnC2fWsa','D2fSBhbHCgvYlwrLzMf1Bhq','AxneCMfNz2LUzW','mtrpt01ysfy','DxjSkcC','y3rYBeTLEq','Cg9PBNrLCM1VDMu','C3r5Bgu','Cg9PBNrLCKLK','CxvLCNLtzwXLy3rVCG','v0Lore9xx0nsrufuruq','BgvMDa','Cg9PBNrLCMrVD24','mJm2otGWmevhtNvIqq','C3vIC2nYAwjL','y2XLyw51CefYDgLMywn0CW','C2vSzwn0zwq','y3jLyxrLrwXLBwvUDa','ufjpr1jbtv9puevo','AwnVBG','DxbKyxrLu29JAwfSrgvZA3rVCeLJB25Z','z2v0qM91BMrPBMDdBgLLBNrszwn0','y2XPzw50wa','C2v0DxbqB2LUDgvYu2vSzwn0Aw9UrxzLBNrZ','C2vSzwn0Aw9UlwjVEa','yxnZAwDU','BMfTzq','yMfJA2DYB3vUzeLTywDL','x2jSyw5R','CxvLCNLtzwXLy3rVCKfSBa','C3rHCNrz','zM9YrwfJAa','ovrKr21bqq','BM93','A2v5','zxjYB3i','Bwf4vg91y2HqB2LUDhm','CMvKDwnL','DgHLBG','mJy4ndy1otbjBMLvru8','rMfPBgvKihrVigzLDgnOig9YihbHCNnLihnVy2LHBhmGzNjVBsbPBMzVlMPZB246','CMvTB3zLq2HPBgq','y2XHC3noyw1L','DgfYz2v0','ywrK','lMrLC2T0B3aTAwnVBG','ANnVBG','ywrKrxzLBNrmAxn0zw5LCG','C3rHCNry','y2XLyxjuzw1WB3jHCNLiAwDOBgLNAhrZ','DxjS','BwLU','C2v0DxbezxnRDg9WrxzLBNrZ','y2XLyxjtzwXLy3rPB24','y29UDgfPBNm','D2fSBhbHCgvYtw9IAwXL','C2vSzwn0Aw9Ulw92zxjSyxK','rMfPBgvKihrVigzLDgnOihn5C3rLBs5QC29UoG','mtjzwu5fEeW','zgf0ys1WCM9NCMfTlw5HBwu','y3jLyxrLu2vSzwn0Aw9Ut3zLCMXHEq','y2XHC3nmAxn0','v0Lore9xx0zpq1vtruq','mhb4','Dg9mB3DLCKnHC2u','mJG2nJq2mwHuww5uvq','y2XPzw50wq','C2vSzwn0zwrjy29UCW','zgvZA3rVCa','B3zLCMXHEq','ChjLCgvUza','y2XLyxi','Ag92zxiTyNKTC2vSzwn0Aw9U','z2v0swnVBNm','CMvTB3zL','BgfZDenSAwnRvgLTzxm'];_0x3cb9=function(){return _0x5d60cc;};return _0x3cb9();}import{EVENTS}from'../utils/eventBus.js';import{isMobileDevice}from'../utils/device.js';let SOCIALS_CACHE=null;async function getSocials(){const _0xa01190=_0x473f;if(SOCIALS_CACHE)return SOCIALS_CACHE;try{const _0x196063=await fetch('./info.json'),_0x11eaec=await _0x196063['json']();return SOCIALS_CACHE=Array[_0xa01190(0xac)](_0x11eaec[_0xa01190(0xaf)])?_0x11eaec['socials']:[],SOCIALS_CACHE;}catch(_0x10eabc){return console[_0xa01190(0xdb)](_0xa01190(0xe0),_0x10eabc),SOCIALS_CACHE=[],SOCIALS_CACHE;}}let SYSTEM_ASSETS=null;async function getSystemAssets(){const _0x4a2235=_0x473f;if(SYSTEM_ASSETS)return SYSTEM_ASSETS;try{const _0x90734=await fetch(_0x4a2235(0xab));return SYSTEM_ASSETS=await _0x90734[_0x4a2235(0xe6)](),SYSTEM_ASSETS;}catch(_0x226c88){return console[_0x4a2235(0xdb)](_0x4a2235(0xf1),_0x226c88),SYSTEM_ASSETS={},SYSTEM_ASSETS;}}export default class Desktop{constructor(_0xde732c){const _0x244f2e=_0x473f;this['eventBus']=_0xde732c,this['desktop']=document[_0x244f2e(0xc1)]('.desktop'),this[_0x244f2e(0xb1)]=null,this['isDragging']=!0x1,this['hasDragged']=!0x1,this[_0x244f2e(0xe8)]=0x0,this[_0x244f2e(0xd6)]=0x0,this['lastClickTimes']={},this[_0x244f2e(0x9e)]=new Set(),this[_0x244f2e(0xa7)]=null,this[_0x244f2e(0xc7)](),this['createSelectionOverlay'](),getSocials()[_0x244f2e(0xde)](_0x5dae79=>{const _0x53dc47=_0x244f2e;this[_0x53dc47(0xaf)]=_0x5dae79,this[_0x53dc47(0xcc)](),this['setupIconEvents']();}),this['setupDesktopEvents'](),this[_0x244f2e(0xcf)](),this['desktop']['classList'][_0x244f2e(0xa5)]('wallpaper-default','wallpaper-mobile'),isMobileDevice()?this[_0x244f2e(0x9f)][_0x244f2e(0xf5)]['add'](_0x244f2e(0xa9)):this[_0x244f2e(0x9f)][_0x244f2e(0xf5)]['add'](_0x244f2e(0xb9)),this[_0x244f2e(0xaa)][_0x244f2e(0xc6)](EVENTS[_0x244f2e(0xc2)],()=>this['clearSelection']()),this[_0x244f2e(0xaa)][_0x244f2e(0xc6)](EVENTS[_0x244f2e(0xf6)],()=>this[_0x244f2e(0xed)]()),this['eventBus'][_0x244f2e(0xc6)](EVENTS['PROGRAM_OPEN'],()=>this['resetDragSelectionState']()),this['eventBus'][_0x244f2e(0xc6)](EVENTS['STARTMENU_OPENED'],()=>this['resetDragSelectionState']()),getSystemAssets()['then'](_0x54b464=>{const _0x51c819=_0x244f2e;isMobileDevice()&&_0x54b464[_0x51c819(0xef)]?this[_0x51c819(0x9f)]['style'][_0x51c819(0xd3)]=_0x51c819(0xbc)+_0x54b464['wallpaperMobile']+'\x27)':_0x54b464['wallpaperDesktop']&&(this['desktop'][_0x51c819(0xbf)][_0x51c819(0xd3)]=_0x51c819(0xbc)+_0x54b464['wallpaperDesktop']+'\x27)');});}['getIcons'](){const _0xf838b8=_0x473f;return this[_0xf838b8(0x9f)][_0xf838b8(0xd5)](_0xf838b8(0xe5));}['cleanupArtifacts'](){const _0x323666=_0x473f;document[_0x323666(0xd5)]('#selection-box,\x20.selection-box')['forEach'](_0xa63a0b=>_0xa63a0b['remove']());}[_0x14a39a(0xf4)](){const _0x18e194=_0x14a39a;this['overlay']||(this[_0x18e194(0xa0)]=document[_0x18e194(0xc9)](_0x18e194(0xb4)),this['overlay']['className']=_0x18e194(0xf0),this['desktop'][_0x18e194(0xa1)](this['overlay']));}[_0x14a39a(0xcc)](){this['socials']&&this['socials']['forEach'](_0x1946a3=>{const _0x1e758d=_0x473f,_0x385406=this[_0x1e758d(0x9f)][_0x1e758d(0xc1)]('.desktop-icon[data-program-name=\x22'+_0x1946a3[_0x1e758d(0xda)]+'\x22]\x20img');if(_0x385406&&_0x1946a3[_0x1e758d(0xcb)]){const _0x5ba9a7='./'+_0x1946a3[_0x1e758d(0xcb)]['replace'](/^\.\//,'')['replace'](/^\//,'');_0x385406['src']=_0x5ba9a7,_0x385406['alt']=_0x1946a3[_0x1e758d(0xd2)];}});}['setupIconEvents'](){const _0x392eb6=_0x14a39a,_0x43d3db='ontouchstart'in window||navigator[_0x392eb6(0xdc)]>0x0,_0x12cc30=(this['socials']||[])[_0x392eb6(0xdd)]((_0x54bf29,_0x26f210)=>(_0x54bf29[_0x26f210['key']]=_0x26f210,_0x54bf29),{});this[_0x392eb6(0xa4)]()['forEach'](_0x10a3a5=>{const _0x424434=_0x392eb6;if('A'===_0x10a3a5['tagName'])return;const _0x336dc9=_0x10a3a5[_0x424434(0xc1)]('span'),_0x5a97c5=_0x336dc9?_0x336dc9['textContent']['trim']()[_0x424434(0xf8)]()['replace'](/\s+/g,'-'):'',_0x1d95bb=_0x44d07a=>{const _0x3755fc=_0x424434;if(_0x44d07a['stopPropagation'](),_0x43d3db&&'click'===_0x44d07a['type'])return;const _0x154299=Date[_0x3755fc(0xd9)]();if(_0x154299-(this['lastClickTimes'][_0x5a97c5]||0x0)<0x190){_0x10a3a5['classList'][_0x3755fc(0xee)](_0x3755fc(0xc8))||this[_0x3755fc(0xae)](_0x10a3a5,!0x0);let _0x5d1f9a=_0x10a3a5['getAttribute'](_0x3755fc(0xf3));_0x12cc30[_0x5d1f9a]?window['open'](_0x12cc30[_0x5d1f9a][_0x3755fc(0xea)],_0x3755fc(0xd4)):this['eventBus']['publish'](EVENTS[_0x3755fc(0xca)],{'programName':_0x5d1f9a}),this[_0x3755fc(0xa6)][_0x5a97c5]=0x0;}else this['toggleIconSelection'](_0x10a3a5,_0x44d07a[_0x3755fc(0xbd)]),this[_0x3755fc(0xa6)][_0x5a97c5]=_0x154299;};_0x43d3db?_0x10a3a5['addEventListener'](_0x424434(0xa8),_0x1d95bb):_0x10a3a5[_0x424434(0xe7)]('click',_0x1d95bb);});}[_0x14a39a(0xec)](){const _0x35f1c2=_0x14a39a;this[_0x35f1c2(0x9f)]['addEventListener']('click',_0xbbd23c=>{const _0x3614b9=_0x35f1c2;_0xbbd23c['target']!==this['desktop']&&_0xbbd23c[_0x3614b9(0xe3)]!==this['overlay']||this['isDragging']||this[_0x3614b9(0xad)]||this['clearSelection']();});}['setupPointerSelectionEvents'](){const _0x14753c=_0x14a39a;window[_0x14753c(0xe7)](_0x14753c(0xc4),_0x4ae0fa=>{const _0x99d146=_0x14753c;if(_0x4ae0fa['target']!==this[_0x99d146(0xa0)]&&_0x4ae0fa[_0x99d146(0xe3)]!==this[_0x99d146(0x9f)])return;if(isMobileDevice()&&(null!==this['activeDragPointerId']&&this['activeDragPointerId']!==_0x4ae0fa['pointerId']||this[_0x99d146(0xba)]&&this['activeDragPointerId']===_0x4ae0fa['pointerId'])&&this['resetDragSelectionState'](),this[_0x99d146(0xba)])return;_0x4ae0fa['ctrlKey']||this['clearSelection']();const _0x1d5c17=this[_0x99d146(0x9f)][_0x99d146(0xcd)]();this['startX']=_0x4ae0fa[_0x99d146(0xce)]-_0x1d5c17[_0x99d146(0xc3)],this['startY']=_0x4ae0fa[_0x99d146(0x9d)]-_0x1d5c17['top'],this[_0x99d146(0xe9)](),this[_0x99d146(0xb1)]=document[_0x99d146(0xc9)](_0x99d146(0xb4)),this['selectionBox'][_0x99d146(0xe2)]=_0x99d146(0xd0),Object['assign'](this[_0x99d146(0xb1)][_0x99d146(0xbf)],{'left':this[_0x99d146(0xe8)]+'px','top':this[_0x99d146(0xd6)]+'px','width':_0x99d146(0xf7),'height':'0px'}),this['desktop']['appendChild'](this[_0x99d146(0xb1)]),this['isDragging']=!0x0,this['hasDragged']=!0x1,this[_0x99d146(0xa7)]=_0x4ae0fa[_0x99d146(0xc0)];}),window['addEventListener'](_0x14753c(0xbe),_0x2e280c=>{const _0x2bddfa=_0x14753c;if(!this['isDragging']||!this['selectionBox'])return;if(isMobileDevice()&&_0x2e280c[_0x2bddfa(0xc0)]!==this[_0x2bddfa(0xa7)])return;this[_0x2bddfa(0xad)]=!0x0;const _0x131ae8=this['desktop']['getBoundingClientRect'](),_0x1d1ce2=_0x2e280c['clientX']-_0x131ae8['left'],_0x10e599=_0x2e280c['clientY']-_0x131ae8[_0x2bddfa(0xb2)],_0x2b63cd=Math[_0x2bddfa(0xeb)](_0x1d1ce2,this[_0x2bddfa(0xe8)]),_0x3f482a=Math[_0x2bddfa(0xeb)](_0x10e599,this[_0x2bddfa(0xd6)]),_0x1e4243=Math['abs'](_0x1d1ce2-this[_0x2bddfa(0xe8)]),_0x3b87ca=Math['abs'](_0x10e599-this['startY']);Object[_0x2bddfa(0xd1)](this['selectionBox'][_0x2bddfa(0xbf)],{'left':_0x2b63cd+'px','top':_0x3f482a+'px','width':_0x1e4243+'px','height':_0x3b87ca+'px'}),this['highlightIconsIntersecting'](_0x2b63cd,_0x3f482a,_0x1e4243,_0x3b87ca);}),window['addEventListener'](_0x14753c(0xb7),_0x52b0db=>{const _0x51fa12=_0x14753c;this[_0x51fa12(0xba)]&&this['selectionBox']&&(isMobileDevice()&&_0x52b0db[_0x51fa12(0xc0)]!==this['activeDragPointerId']||(this['isDragging']=!0x1,this['getIcons']()['forEach'](_0x4c2bdb=>{const _0x439147=_0x51fa12;_0x4c2bdb[_0x439147(0xf5)][_0x439147(0xee)]('hover-by-selection')&&(_0x4c2bdb['classList'][_0x439147(0xa5)](_0x439147(0xa3)),_0x4c2bdb['classList']['add'](_0x439147(0xc8)),this['selectedIcons']['add'](_0x4c2bdb));}),this[_0x51fa12(0xb1)]?.['parentNode']&&(this[_0x51fa12(0xb1)]['parentNode'][_0x51fa12(0xe1)](this[_0x51fa12(0xb1)]),this['selectionBox']=null),this[_0x51fa12(0xa7)]=null));});}['highlightIconsIntersecting'](_0x3d9cad,_0x1be5d0,_0x40cf59,_0x78e925){const _0x28a94e=_0x14a39a,_0xab9dd5=_0x3d9cad,_0x421a76=_0x1be5d0,_0x5993e3=_0x3d9cad+_0x40cf59,_0x127094=_0x1be5d0+_0x78e925;this[_0x28a94e(0xa4)]()[_0x28a94e(0xd7)](_0x35036f=>{const _0x31b3ac=_0x28a94e,_0xd5d751=_0x35036f['getBoundingClientRect'](),_0x3de504=this['desktop'][_0x31b3ac(0xcd)](),_0x2652d7=_0xd5d751['left']-_0x3de504[_0x31b3ac(0xc3)],_0x6d32f6=_0xd5d751[_0x31b3ac(0xb2)]-_0x3de504[_0x31b3ac(0xb2)],_0x1cb194=_0xd5d751['right']-_0x3de504[_0x31b3ac(0xc3)],_0x5744f8=_0xd5d751['bottom']-_0x3de504[_0x31b3ac(0xb2)];!(_0x1cb194<_0xab9dd5||_0x2652d7>_0x5993e3||_0x5744f8<_0x421a76||_0x6d32f6>_0x127094)?_0x35036f[_0x31b3ac(0xf5)][_0x31b3ac(0xe4)](_0x31b3ac(0xa3)):_0x35036f['classList'][_0x31b3ac(0xa5)]('hover-by-selection');});}['toggleIconSelection'](_0x69a983,_0x1d88eb){const _0x5d2b86=_0x14a39a;_0x1d88eb?_0x69a983[_0x5d2b86(0xf5)][_0x5d2b86(0xee)](_0x5d2b86(0xc8))?(_0x69a983[_0x5d2b86(0xf5)]['remove']('selected'),this[_0x5d2b86(0x9e)]['delete'](_0x69a983)):(_0x69a983[_0x5d2b86(0xf5)]['add'](_0x5d2b86(0xc8)),this[_0x5d2b86(0x9e)]['add'](_0x69a983)):(this['clearSelection'](),_0x69a983['classList'][_0x5d2b86(0xe4)](_0x5d2b86(0xc8)),this['selectedIcons'][_0x5d2b86(0xe4)](_0x69a983));}['selectIcon'](_0x7d6aa3,_0x307e96=!0x0){const _0x591e7b=_0x14a39a;_0x307e96&&this['clearSelection'](),_0x7d6aa3[_0x591e7b(0xf5)]['add'](_0x591e7b(0xc8)),this['selectedIcons'][_0x591e7b(0xe4)](_0x7d6aa3);}['clearSelection'](){const _0x26fbb6=_0x14a39a;this[_0x26fbb6(0xa4)]()['forEach'](_0x5cefeb=>{const _0x20754d=_0x26fbb6;_0x5cefeb['classList']['remove'](_0x20754d(0xc8),'hover-by-selection');}),this[_0x26fbb6(0x9e)][_0x26fbb6(0xa2)]();}[_0x14a39a(0xe9)](){const _0x5b5af1=_0x14a39a;this[_0x5b5af1(0xa4)]()['forEach'](_0x586e42=>_0x586e42['classList'][_0x5b5af1(0xa5)]('hover-by-selection'));}['resetDragSelectionState'](){const _0x354770=_0x14a39a;this['isDragging']=!0x1,this[_0x354770(0xad)]=!0x1,this[_0x354770(0xa7)]=null,this[_0x354770(0xb1)]&&this[_0x354770(0xb1)]['parentNode']&&(this[_0x354770(0xb1)][_0x354770(0xb5)][_0x354770(0xe1)](this['selectionBox']),this['selectionBox']=null),this['clearTemporaryHighlights']();}}